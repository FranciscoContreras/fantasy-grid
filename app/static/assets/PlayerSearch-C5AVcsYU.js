import{j as e}from"./ui-vendor-DMJGUSRC.js";import{r as o}from"./react-vendor-nf7bT_Uh.js";import{t as S,I as w,C as E}from"./index-BB3SlnUL.js";import{B as u}from"./badge-Cj8lSNIC.js";const j="https://a.espncdn.com/i";function C(a,t=500){if(!a||a==="FA"||a==="BYE"||a==="TBD")return"";const l={JAX:"jac",LAR:"lar",LAC:"lac",WSH:"wsh",KC:"kc"}[a]||a.toLowerCase();return`${j}/teamlogos/nfl/500/${l}.png`}function T(a){return a?`${j}/headshots/nfl/players/full/${a}.png`:"https://a.espncdn.com/combiner/i?img=/i/headshots/nophoto.png&w=200&h=146"}function P({onSelectPlayer:a}){const[t,m]=o.useState(""),[l,v]=o.useState(""),[i,c]=o.useState([]),[d,g]=o.useState(!1),[p,f]=o.useState(""),h=o.useCallback(async(s,n)=>{if(!s||s.length<2){c([]);return}g(!0),f("");try{const r=await S(s,n);c(r.data||[])}catch(r){f("Failed to search players. Please try again."),console.error("Search failed:",r)}finally{g(!1)}},[]);o.useEffect(()=>{const s=setTimeout(()=>{t.length>=2?h(t,l):c([])},150);return()=>clearTimeout(s)},[t,l,h]);const N=s=>{s.key==="Enter"&&t.length>=2&&h(t,l)},b=(s,n)=>{if(!n)return s;const r=s.split(new RegExp(`(${n})`,"gi"));return e.jsx(e.Fragment,{children:r.map((x,y)=>x.toLowerCase()===n.toLowerCase()?e.jsx("span",{className:"bg-yellow-200 dark:bg-yellow-800 font-semibold",children:x},y):x)})};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm text-muted-foreground mb-2",children:"💡 Tip: Select a position first for faster, more accurate results"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:l,onChange:s=>v(s.target.value),className:"px-3 py-2 border rounded-md bg-background min-w-[120px]",disabled:d,children:[e.jsx("option",{value:"",children:"All Positions"}),e.jsx("option",{value:"QB",children:"QB"}),e.jsx("option",{value:"RB",children:"RB"}),e.jsx("option",{value:"WR",children:"WR"}),e.jsx("option",{value:"TE",children:"TE"}),e.jsx("option",{value:"K",children:"K"}),e.jsx("option",{value:"DEF",children:"DEF"})]}),e.jsx(w,{placeholder:"Search players by name (min 2 characters)...",value:t,onChange:s=>m(s.target.value),onKeyPress:N,disabled:d,className:"flex-1"})]}),t.length>0&&t.length<2&&e.jsx("p",{className:"text-xs text-muted-foreground",children:"Type at least 2 characters to search"}),d&&e.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-2",children:[e.jsx("span",{className:"animate-spin",children:"⏳"})," Searching..."]})]}),p&&e.jsx("div",{className:"text-sm text-red-600 dark:text-red-400 p-3 bg-red-50 dark:bg-red-950 rounded-md",children:p}),i.length>0&&e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"text-xs text-muted-foreground",children:[i.length," player",i.length!==1?"s":""," found"]}),e.jsx("div",{className:"grid gap-2 max-h-96 overflow-y-auto",children:i.map((s,n)=>e.jsx(E,{className:"p-3 cursor-pointer hover:bg-accent transition-colors hover:shadow-md",onClick:()=>{a(s),m(""),c([])},children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("img",{src:T(s.player_id||s.nfl_id),alt:s.name,className:"w-12 h-12 rounded-full object-cover border-2 border-gray-200 dark:border-gray-700",onError:r=>{r.currentTarget.src="https://a.espncdn.com/combiner/i?img=/i/headshots/nophoto.png&w=200&h=146"}}),s.team&&e.jsx("img",{src:C(s.team),alt:s.team,className:"w-7 h-7 object-contain",onError:r=>r.currentTarget.style.display="none"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold",children:b(s.name,t)}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(u,{variant:"outline",className:"text-xs",children:s.position}),e.jsx(u,{variant:"outline",className:"text-xs",children:s.team}),s.status&&s.status.toUpperCase()==="ACTIVE"&&e.jsx(u,{className:"text-xs bg-green-600 text-white",children:"Active"})]})]})]}),s.jersey_number&&e.jsxs("div",{className:"text-xl font-bold text-muted-foreground ml-4",children:["#",s.jersey_number]})]})},s.id||n))})]}),!d&&i.length===0&&t.length>=2&&e.jsxs("div",{className:"text-center py-8",children:[e.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:['No players found for "',t,'"']}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Try:"}),e.jsxs("ul",{className:"text-xs text-muted-foreground mt-1",children:[e.jsx("li",{children:"• Checking your spelling"}),e.jsx("li",{children:"• Using a different name variation"}),e.jsx("li",{children:"• Searching by first or last name only"}),e.jsx("li",{children:"• Removing the position filter"})]})]})]})}const L=Object.freeze(Object.defineProperty({__proto__:null,PlayerSearch:P},Symbol.toStringTag,{value:"Module"}));export{P,C as a,L as b,T as g};
