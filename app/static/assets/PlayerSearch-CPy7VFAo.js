import{j as e}from"./ui-vendor-DMJGUSRC.js";import{r as o}from"./react-vendor-nf7bT_Uh.js";import{v as w,w as S,x as E,I as C,C as T}from"./index-DfSbbCOK.js";const P=S("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function h({className:r,variant:t,...l}){return e.jsx("div",{className:w(P({variant:t}),r),...l})}const j="https://a.espncdn.com/i";function k(r,t=500){if(!r||r==="FA"||r==="BYE"||r==="TBD")return"";const i={JAX:"jac",LAR:"lar",LAC:"lac",WSH:"wsh",KC:"kc"}[r]||r.toLowerCase();return`${j}/teamlogos/nfl/500/${i}.png`}function _(r){return r?`${j}/headshots/nfl/players/full/${r}.png`:"https://a.espncdn.com/combiner/i?img=/i/headshots/nophoto.png&w=200&h=146"}function B({onSelectPlayer:r}){const[t,l]=o.useState(""),[i,v]=o.useState(""),[c,d]=o.useState([]),[m,g]=o.useState(!1),[f,p]=o.useState(""),x=o.useCallback(async(s,a)=>{if(!s||s.length<2){d([]);return}g(!0),p("");try{const n=await E(s,a);d(n.data||[])}catch(n){p("Failed to search players. Please try again."),console.error("Search failed:",n)}finally{g(!1)}},[]);o.useEffect(()=>{const s=setTimeout(()=>{t.length>=2?x(t,i):d([])},150);return()=>clearTimeout(s)},[t,i,x]);const b=s=>{s.key==="Enter"&&t.length>=2&&x(t,i)},N=(s,a)=>{if(!a)return s;const n=s.split(new RegExp(`(${a})`,"gi"));return e.jsx(e.Fragment,{children:n.map((u,y)=>u.toLowerCase()===a.toLowerCase()?e.jsx("span",{className:"bg-yellow-200 dark:bg-yellow-800 font-semibold",children:u},y):u)})};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm text-muted-foreground mb-2",children:"💡 Tip: Select a position first for faster, more accurate results"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:i,onChange:s=>v(s.target.value),className:"px-3 py-2 border rounded-md bg-background min-w-[120px]",disabled:m,children:[e.jsx("option",{value:"",children:"All Positions"}),e.jsx("option",{value:"QB",children:"QB"}),e.jsx("option",{value:"RB",children:"RB"}),e.jsx("option",{value:"WR",children:"WR"}),e.jsx("option",{value:"TE",children:"TE"}),e.jsx("option",{value:"K",children:"K"}),e.jsx("option",{value:"DEF",children:"DEF"})]}),e.jsx(C,{placeholder:"Search players by name (min 2 characters)...",value:t,onChange:s=>l(s.target.value),onKeyPress:b,disabled:m,className:"flex-1"})]}),t.length>0&&t.length<2&&e.jsx("p",{className:"text-xs text-muted-foreground",children:"Type at least 2 characters to search"}),m&&e.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-2",children:[e.jsx("span",{className:"animate-spin",children:"⏳"})," Searching..."]})]}),f&&e.jsx("div",{className:"text-sm text-red-600 dark:text-red-400 p-3 bg-red-50 dark:bg-red-950 rounded-md",children:f}),c.length>0&&e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"text-xs text-muted-foreground",children:[c.length," player",c.length!==1?"s":""," found"]}),e.jsx("div",{className:"grid gap-2 max-h-96 overflow-y-auto",children:c.map((s,a)=>e.jsx(T,{className:"p-3 cursor-pointer hover:bg-accent transition-colors hover:shadow-md",onClick:()=>{r(s),l(""),d([])},children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("img",{src:_(s.player_id||s.nfl_id),alt:s.name,className:"w-12 h-12 rounded-full object-cover border-2 border-gray-200 dark:border-gray-700",onError:n=>{n.currentTarget.src="https://a.espncdn.com/combiner/i?img=/i/headshots/nophoto.png&w=200&h=146"}}),s.team&&e.jsx("img",{src:k(s.team),alt:s.team,className:"w-7 h-7 object-contain",onError:n=>n.currentTarget.style.display="none"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold",children:N(s.name,t)}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(h,{variant:"outline",className:"text-xs",children:s.position}),e.jsx(h,{variant:"outline",className:"text-xs",children:s.team}),s.status&&s.status.toUpperCase()==="ACTIVE"&&e.jsx(h,{className:"text-xs bg-green-600 text-white",children:"Active"})]})]})]}),s.jersey_number&&e.jsxs("div",{className:"text-xl font-bold text-muted-foreground ml-4",children:["#",s.jersey_number]})]})},s.id||a))})]}),!m&&c.length===0&&t.length>=2&&e.jsxs("div",{className:"text-center py-8",children:[e.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:['No players found for "',t,'"']}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Try:"}),e.jsxs("ul",{className:"text-xs text-muted-foreground mt-1",children:[e.jsx("li",{children:"• Checking your spelling"}),e.jsx("li",{children:"• Using a different name variation"}),e.jsx("li",{children:"• Searching by first or last name only"}),e.jsx("li",{children:"• Removing the position filter"})]})]})]})}const F=Object.freeze(Object.defineProperty({__proto__:null,PlayerSearch:B},Symbol.toStringTag,{value:"Module"}));export{h as B,B as P,k as a,F as b,_ as g};
