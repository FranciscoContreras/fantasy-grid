import{j as t}from"./ui-vendor-DMJGUSRC.js";import{r as n}from"./react-vendor-nf7bT_Uh.js";import{a as v}from"./index-Caokjs3M.js";const g=({stats:e,loading:s})=>{if(s)return t.jsxs("div",{className:"p-6 bg-white rounded-lg shadow",children:[t.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Advanced Stats"}),t.jsxs("div",{className:"animate-pulse space-y-3",children:[t.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),t.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),t.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3"})]})]});if(!e)return t.jsxs("div",{className:"p-6 bg-white rounded-lg shadow",children:[t.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Advanced Stats"}),t.jsx("p",{className:"text-gray-500",children:"No advanced stats available"})]});const{position:d}=e;return t.jsxs("div",{className:"p-6 bg-white rounded-lg shadow space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h3",{className:"text-lg font-semibold",children:"Advanced Stats (Next Gen Stats)"}),t.jsxs("span",{className:"text-sm text-gray-500",children:[e.season," ",e.week?`Week ${e.week}`:"Season"]})]}),d==="QB"&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.cpoe!==void 0&&t.jsx(a,{label:"CPOE",value:`${e.cpoe>0?"+":""}${e.cpoe.toFixed(1)}%`,description:"Completion % Over Expected",highlight:e.cpoe>3?"positive":e.cpoe<-3?"negative":void 0}),e.epa_per_play!==void 0&&t.jsx(a,{label:"EPA/Play",value:e.epa_per_play.toFixed(2),description:"Expected Points Added per Play",highlight:e.epa_per_play>.2?"positive":e.epa_per_play<-.1?"negative":void 0}),e.time_to_throw!==void 0&&t.jsx(a,{label:"Time to Throw",value:`${e.time_to_throw.toFixed(1)}s`,description:"Average time from snap to release",highlight:e.time_to_throw<2.3?"positive":void 0}),e.avg_air_yards!==void 0&&t.jsx(a,{label:"Avg Air Yards",value:e.avg_air_yards.toFixed(1),description:"Average depth of target"})]}),e.success_rate!==void 0&&t.jsx("div",{className:"pt-4 border-t",children:t.jsx(a,{label:"Success Rate",value:`${e.success_rate.toFixed(1)}%`,description:"% of plays with positive EPA",highlight:e.success_rate>50?"positive":void 0})})]}),(d==="WR"||d==="TE")&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.avg_separation!==void 0&&t.jsx(a,{label:"Avg Separation",value:`${e.avg_separation.toFixed(1)} yd`,description:"Average yards from nearest defender",highlight:e.avg_separation>3.5?"positive":e.avg_separation<2?"negative":void 0}),e.avg_yac!==void 0&&t.jsx(a,{label:"Avg YAC",value:`${e.avg_yac.toFixed(1)} yd`,description:"Yards After Catch per reception",highlight:e.avg_yac>6?"positive":void 0}),e.target_share!==void 0&&t.jsx(a,{label:"Target Share",value:`${e.target_share.toFixed(1)}%`,description:"% of team's targets",highlight:e.target_share>25?"positive":e.target_share<12?"negative":void 0}),e.wopr!==void 0&&t.jsx(a,{label:"WOPR",value:e.wopr.toFixed(2),description:"Weighted Opportunity Rating",highlight:e.wopr>.7?"positive":void 0})]}),e.snap_share!==void 0&&t.jsx("div",{className:"pt-4 border-t",children:t.jsx(a,{label:"Snap Share",value:`${e.snap_share.toFixed(1)}%`,description:"% of offensive snaps played",highlight:e.snap_share>80?"positive":e.snap_share<50?"negative":void 0})})]}),d==="RB"&&t.jsx("div",{className:"space-y-4",children:t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.rush_yards_over_expected_per_att!==void 0&&t.jsx(a,{label:"Yards Over Expected",value:`${e.rush_yards_over_expected_per_att>0?"+":""}${e.rush_yards_over_expected_per_att.toFixed(1)} yd`,description:"Per carry vs expected",highlight:e.rush_yards_over_expected_per_att>.5?"positive":e.rush_yards_over_expected_per_att<-.3?"negative":void 0}),e.success_rate!==void 0&&t.jsx(a,{label:"Success Rate",value:`${e.success_rate.toFixed(1)}%`,description:"% of carries with positive EPA",highlight:e.success_rate>50?"positive":void 0}),e.snap_share!==void 0&&t.jsx(a,{label:"Snap Share",value:`${e.snap_share.toFixed(1)}%`,description:"% of offensive snaps",highlight:e.snap_share>70?"positive":e.snap_share<40?"negative":void 0}),e.epa_per_play!==void 0&&t.jsx(a,{label:"EPA/Play",value:e.epa_per_play.toFixed(2),description:"Expected Points Added per play",highlight:e.epa_per_play>.15?"positive":void 0})]})}),e.epa_total!==void 0&&t.jsxs("div",{className:"pt-4 border-t",children:[t.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"Total EPA This Season"}),t.jsxs("div",{className:"text-2xl font-bold",children:[e.epa_total>0?"+":"",e.epa_total.toFixed(1)]})]}),t.jsx("div",{className:"pt-4 border-t text-xs text-gray-500",children:t.jsx("p",{children:"Data provided by Next Gen Stats via Grid Iron Mind API v2"})})]})},a=({label:e,value:s,description:d,highlight:i})=>{const l=i==="positive"?"bg-green-50 border-green-200":i==="negative"?"bg-red-50 border-red-200":"bg-gray-50 border-gray-200",c=i==="positive"?"text-green-700":i==="negative"?"text-red-700":"text-gray-900";return t.jsxs("div",{className:`p-4 rounded-lg border ${l}`,children:[t.jsx("div",{className:"text-xs font-medium text-gray-600 uppercase tracking-wide",children:e}),t.jsx("div",{className:`text-2xl font-bold ${c} mt-1`,children:s}),t.jsx("div",{className:"text-xs text-gray-500 mt-1",children:d})]})};function b({analysis:e}){var m;const[s,d]=n.useState(null),[i,l]=n.useState(!1);n.useEffect(()=>{(async()=>{var p;if((p=e.player)!=null&&p.id)try{l(!0);const o=await v.get(`/advanced/players/${e.player.id}/nextgen`,{params:{season:2024}});d(o.data.data)}catch(o){console.error("Failed to fetch advanced stats:",o)}finally{l(!1)}})()},[(m=e.player)==null?void 0:m.id]);const c=r=>{switch(r){case"START":return"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30";case"CONSIDER":return"bg-amber-500/20 text-amber-400 border border-amber-500/30";case"BENCH":return"bg-gray-500/20 text-gray-400 border border-gray-500/30";default:return"bg-gray-500/20 text-gray-400 border border-gray-500/30"}},h=r=>r.startsWith("A")?"text-emerald-400":r.startsWith("B")?"text-amber-400":r.startsWith("C")?"text-orange-400":"text-red-400",x=r=>r>=70?"text-emerald-400":r>=50?"text-amber-400":r>=30?"text-orange-400":"text-red-400";return t.jsxs("div",{className:"space-y-6 font-system",children:[t.jsxs("div",{className:"glass-card p-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-semibold text-white mb-1",children:e.player.name}),t.jsxs("p",{className:"text-sm text-white/60 font-medium",children:[e.player.position," • ",e.player.team]})]}),t.jsx("div",{className:`px-4 py-2 rounded-full text-sm font-medium ${c(e.recommendation.status)}`,children:e.recommendation.status})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"glass compact-padding",children:[t.jsx("p",{className:"text-sm text-white/60 font-medium mb-2",children:"Matchup Score"}),t.jsxs("p",{className:`text-3xl font-bold ${x(e.matchup_score)} mb-3`,children:[e.matchup_score,"/100"]}),t.jsx("div",{className:"w-full bg-white/10 h-2 rounded-full overflow-hidden",children:t.jsx("div",{className:`h-full transition-all rounded-full ${e.matchup_score>=70?"bg-emerald-400":e.matchup_score>=50?"bg-amber-400":"bg-red-400"}`,style:{width:`${e.matchup_score}%`}})})]}),t.jsxs("div",{className:"glass compact-padding",children:[t.jsx("p",{className:"text-sm text-white/60 font-medium mb-2",children:"Weather Impact"}),t.jsxs("p",{className:`text-3xl font-bold ${x(e.weather_impact)} mb-3`,children:[e.weather_impact,"/100"]}),t.jsx("div",{className:"w-full bg-white/10 h-2 rounded-full overflow-hidden",children:t.jsx("div",{className:`h-full transition-all rounded-full ${e.weather_impact>=70?"bg-emerald-400":e.weather_impact>=50?"bg-amber-400":"bg-red-400"}`,style:{width:`${e.weather_impact}%`}})})]})]}),t.jsxs("div",{className:"glass compact-padding mt-6",children:[t.jsx("p",{className:"text-sm text-white/60 font-medium mb-4",children:"AI Analysis"}),t.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-6",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:`text-5xl font-bold ${h(e.ai_grade.grade)} mb-2`,children:e.ai_grade.grade}),t.jsx("p",{className:"text-xs text-white/50 font-medium",children:"Grade"})]}),t.jsxs("div",{className:"flex-1 space-y-3",children:[t.jsxs("div",{children:[t.jsxs("p",{className:"text-2xl font-bold text-white",children:[e.ai_grade.predicted_points," ",t.jsx("span",{className:"text-sm text-white/60 font-medium",children:"pts"})]}),t.jsx("p",{className:"text-sm text-white/60",children:"Projected Fantasy Points"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-sm text-white/60",children:"Confidence:"}),t.jsxs("span",{className:"text-sm font-semibold text-white",children:[e.ai_grade.confidence,"%"]})]})]})]})]}),e.recommendation.reason&&t.jsxs("div",{className:"glass compact-padding mt-6",children:[t.jsx("p",{className:"text-sm text-white/60 font-medium mb-3",children:"Analysis"}),t.jsx("p",{className:"text-sm text-white/80 leading-relaxed",children:e.recommendation.reason})]}),e.weather_data&&t.jsxs("div",{className:"glass compact-padding mt-6",children:[t.jsx("p",{className:"text-sm text-white/60 font-medium mb-4",children:"Weather Conditions"}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[e.weather_data.temperature&&t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-xs text-white/50 font-medium mb-1",children:"Temperature"}),t.jsxs("p",{className:"text-xl font-bold text-white",children:[e.weather_data.temperature,"°F"]})]}),e.weather_data.wind_speed&&t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-xs text-white/50 font-medium mb-1",children:"Wind Speed"}),t.jsxs("p",{className:"text-xl font-bold text-white",children:[e.weather_data.wind_speed," MPH"]})]}),e.weather_data.conditions&&t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-xs text-white/50 font-medium mb-1",children:"Conditions"}),t.jsx("p",{className:"text-lg font-bold text-white",children:e.weather_data.conditions})]})]})]})]}),t.jsx(g,{stats:s,loading:i})]})}export{b as PlayerAnalysis};
