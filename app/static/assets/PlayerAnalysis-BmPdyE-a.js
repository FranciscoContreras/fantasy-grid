import{j as e}from"./ui-vendor-DMJGUSRC.js";import{r as n}from"./react-vendor-nf7bT_Uh.js";import{a as v}from"./index-BTsFQZj1.js";const g=({stats:t,loading:r})=>{if(r)return e.jsxs("div",{className:"p-6 bg-white rounded-lg shadow",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Advanced Stats"}),e.jsxs("div",{className:"animate-pulse space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3"})]})]});if(!t)return e.jsxs("div",{className:"p-6 bg-white rounded-lg shadow",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Advanced Stats"}),e.jsx("p",{className:"text-gray-500",children:"No advanced stats available"})]});const{position:s}=t;return e.jsxs("div",{className:"p-6 bg-white rounded-lg shadow space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Advanced Stats (Next Gen Stats)"}),e.jsxs("span",{className:"text-sm text-gray-500",children:[t.season," ",t.week?`Week ${t.week}`:"Season"]})]}),s==="QB"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.cpoe!==void 0&&e.jsx(i,{label:"CPOE",value:`${t.cpoe>0?"+":""}${t.cpoe.toFixed(1)}%`,description:"Completion % Over Expected",highlight:t.cpoe>3?"positive":t.cpoe<-3?"negative":void 0}),t.epa_per_play!==void 0&&e.jsx(i,{label:"EPA/Play",value:t.epa_per_play.toFixed(2),description:"Expected Points Added per Play",highlight:t.epa_per_play>.2?"positive":t.epa_per_play<-.1?"negative":void 0}),t.time_to_throw!==void 0&&e.jsx(i,{label:"Time to Throw",value:`${t.time_to_throw.toFixed(1)}s`,description:"Average time from snap to release",highlight:t.time_to_throw<2.3?"positive":void 0}),t.avg_air_yards!==void 0&&e.jsx(i,{label:"Avg Air Yards",value:t.avg_air_yards.toFixed(1),description:"Average depth of target"})]}),t.success_rate!==void 0&&e.jsx("div",{className:"pt-4 border-t",children:e.jsx(i,{label:"Success Rate",value:`${t.success_rate.toFixed(1)}%`,description:"% of plays with positive EPA",highlight:t.success_rate>50?"positive":void 0})})]}),(s==="WR"||s==="TE")&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.avg_separation!==void 0&&e.jsx(i,{label:"Avg Separation",value:`${t.avg_separation.toFixed(1)} yd`,description:"Average yards from nearest defender",highlight:t.avg_separation>3.5?"positive":t.avg_separation<2?"negative":void 0}),t.avg_yac!==void 0&&e.jsx(i,{label:"Avg YAC",value:`${t.avg_yac.toFixed(1)} yd`,description:"Yards After Catch per reception",highlight:t.avg_yac>6?"positive":void 0}),t.target_share!==void 0&&e.jsx(i,{label:"Target Share",value:`${t.target_share.toFixed(1)}%`,description:"% of team's targets",highlight:t.target_share>25?"positive":t.target_share<12?"negative":void 0}),t.wopr!==void 0&&e.jsx(i,{label:"WOPR",value:t.wopr.toFixed(2),description:"Weighted Opportunity Rating",highlight:t.wopr>.7?"positive":void 0})]}),t.snap_share!==void 0&&e.jsx("div",{className:"pt-4 border-t",children:e.jsx(i,{label:"Snap Share",value:`${t.snap_share.toFixed(1)}%`,description:"% of offensive snaps played",highlight:t.snap_share>80?"positive":t.snap_share<50?"negative":void 0})})]}),s==="RB"&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.rush_yards_over_expected_per_att!==void 0&&e.jsx(i,{label:"Yards Over Expected",value:`${t.rush_yards_over_expected_per_att>0?"+":""}${t.rush_yards_over_expected_per_att.toFixed(1)} yd`,description:"Per carry vs expected",highlight:t.rush_yards_over_expected_per_att>.5?"positive":t.rush_yards_over_expected_per_att<-.3?"negative":void 0}),t.success_rate!==void 0&&e.jsx(i,{label:"Success Rate",value:`${t.success_rate.toFixed(1)}%`,description:"% of carries with positive EPA",highlight:t.success_rate>50?"positive":void 0}),t.snap_share!==void 0&&e.jsx(i,{label:"Snap Share",value:`${t.snap_share.toFixed(1)}%`,description:"% of offensive snaps",highlight:t.snap_share>70?"positive":t.snap_share<40?"negative":void 0}),t.epa_per_play!==void 0&&e.jsx(i,{label:"EPA/Play",value:t.epa_per_play.toFixed(2),description:"Expected Points Added per play",highlight:t.epa_per_play>.15?"positive":void 0})]})}),t.epa_total!==void 0&&e.jsxs("div",{className:"pt-4 border-t",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"Total EPA This Season"}),e.jsxs("div",{className:"text-2xl font-bold",children:[t.epa_total>0?"+":"",t.epa_total.toFixed(1)]})]}),e.jsx("div",{className:"pt-4 border-t text-xs text-gray-500",children:e.jsx("p",{children:"Data provided by Next Gen Stats via Grid Iron Mind API v2"})})]})},i=({label:t,value:r,description:s,highlight:d})=>{const l=d==="positive"?"bg-green-50 border-green-200":d==="negative"?"bg-red-50 border-red-200":"bg-gray-50 border-gray-200",c=d==="positive"?"text-green-700":d==="negative"?"text-red-700":"text-gray-900";return e.jsxs("div",{className:`p-4 rounded-lg border ${l}`,children:[e.jsx("div",{className:"text-xs font-medium text-gray-600 uppercase tracking-wide",children:t}),e.jsx("div",{className:`text-2xl font-bold ${c} mt-1`,children:r}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:s})]})};function w({analysis:t}){var h;const[r,s]=n.useState(null),[d,l]=n.useState(!1);n.useEffect(()=>{(async()=>{var p;if((p=t.player)!=null&&p.id)try{l(!0);const o=await v.get(`/advanced/players/${t.player.id}/nextgen`,{params:{season:2025}});s(o.data.data)}catch(o){console.error("Failed to fetch advanced stats:",o)}finally{l(!1)}})()},[(h=t.player)==null?void 0:h.id]);const c=a=>{switch(a){case"START":return"bg-white/20 text-white border border-white/30";case"CONSIDER":return"bg-white/15 text-white/90 border border-white/25";case"BENCH":return"bg-white/10 text-white/70 border border-white/20";default:return"bg-white/10 text-white/70 border border-white/20"}},m=a=>a.startsWith("A")?"text-white":a.startsWith("B")?"text-white/90":a.startsWith("C")?"text-white/80":"text-white/70",x=a=>a>=70?"text-white":a>=50?"text-white/90":a>=30?"text-white/80":"text-white/70";return e.jsxs("div",{className:"space-y-6 font-system",children:[e.jsxs("div",{className:"glass-card p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-white mb-1",children:t.player.name}),e.jsxs("p",{className:"text-sm text-white/60 font-medium",children:[t.player.position," • ",t.player.team]})]}),e.jsx("div",{className:`px-4 py-2 rounded-full text-sm font-medium ${c(t.recommendation.status)}`,children:t.recommendation.status})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"glass compact-padding",children:[e.jsx("p",{className:"text-sm text-white/60 font-medium mb-2",children:"Matchup Score"}),e.jsxs("p",{className:`text-3xl font-bold ${x(t.matchup_score)} mb-3`,children:[t.matchup_score,"/100"]}),e.jsx("div",{className:"w-full bg-white/10 h-2 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full transition-all rounded-full bg-white",style:{width:`${t.matchup_score}%`}})})]}),e.jsxs("div",{className:"glass compact-padding",children:[e.jsx("p",{className:"text-sm text-white/60 font-medium mb-2",children:"Weather Impact"}),e.jsxs("p",{className:`text-3xl font-bold ${x(t.weather_impact)} mb-3`,children:[t.weather_impact,"/100"]}),e.jsx("div",{className:"w-full bg-white/10 h-2 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full transition-all rounded-full bg-white",style:{width:`${t.weather_impact}%`}})})]})]}),e.jsxs("div",{className:"glass compact-padding mt-6",children:[e.jsx("p",{className:"text-sm text-white/60 font-medium mb-4",children:"AI Analysis"}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-5xl font-bold ${m(t.ai_grade.grade)} mb-2`,children:t.ai_grade.grade}),e.jsx("p",{className:"text-xs text-white/50 font-medium",children:"Grade"})]}),e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-2xl font-bold text-white",children:[t.ai_grade.predicted_points," ",e.jsx("span",{className:"text-sm text-white/60 font-medium",children:"pts"})]}),e.jsx("p",{className:"text-sm text-white/60",children:"Projected Fantasy Points"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-white/60",children:"Confidence:"}),e.jsxs("span",{className:"text-sm font-semibold text-white",children:[t.ai_grade.confidence,"%"]})]})]})]})]}),t.recommendation.reason&&e.jsxs("div",{className:"glass compact-padding mt-6",children:[e.jsx("p",{className:"text-sm text-white/60 font-medium mb-3",children:"Analysis"}),e.jsx("p",{className:"text-sm text-white/80 leading-relaxed",children:t.recommendation.reason})]}),t.weather_data&&e.jsxs("div",{className:"glass compact-padding mt-6",children:[e.jsx("p",{className:"text-sm text-white/60 font-medium mb-4",children:"Weather Conditions"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[t.weather_data.temperature&&e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs text-white/50 font-medium mb-1",children:"Temperature"}),e.jsxs("p",{className:"text-xl font-bold text-white",children:[t.weather_data.temperature,"°F"]})]}),t.weather_data.wind_speed&&e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs text-white/50 font-medium mb-1",children:"Wind Speed"}),e.jsxs("p",{className:"text-xl font-bold text-white",children:[t.weather_data.wind_speed," MPH"]})]}),t.weather_data.conditions&&e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs text-white/50 font-medium mb-1",children:"Conditions"}),e.jsx("p",{className:"text-lg font-bold text-white",children:t.weather_data.conditions})]})]})]})]}),e.jsx(g,{stats:r,loading:d})]})}export{w as PlayerAnalysis};
