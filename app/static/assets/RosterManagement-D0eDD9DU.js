import{j as e,C as oe,Z as xe,T as se,a as me,b as he,A as te,c as ue}from"./ui-vendor-DMJGUSRC.js";import{r as i}from"./react-vendor-nf7bT_Uh.js";import{B as f,g as ge,C as y,c as w,a as T,b as F,e as je,f as pe,h as ae,i as be,j as fe,k as Ne,l as ye,m as ve,n as we,I as X,o as ke,p as Se,q as _e}from"./index-CP_-VPik.js";import{B as k}from"./badge-B3GDYYvL.js";import{g as q,a as U,P as Re}from"./PlayerSearch-Fk5H9sQ6.js";function Ce({week:s,season:t,onWeekChange:a}){const u=()=>{s>1&&a(s-1)},n=()=>{s<18&&a(s+1)};return e.jsxs("div",{className:"flex items-center justify-between bg-white border border-gray-200 rounded-xl p-6",children:[e.jsxs(f,{variant:"outline",onClick:u,disabled:s<=1,className:"px-6 font-bold",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"PREV WEEK"]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-4xl font-black tracking-tight",children:["WEEK ",s]}),e.jsxs("div",{className:"text-sm text-gray-500 uppercase tracking-wider font-semibold mt-1",children:[t," Season"]})]}),e.jsxs(f,{variant:"outline",onClick:n,disabled:s>=18,className:"px-6 font-bold",children:["NEXT WEEK",e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})}function Ae({score:s}){const t=()=>s>=85?"bg-black":s>=70?"bg-gray-600":"bg-gray-400",a=()=>s>=85?"EXCELLENT":s>=70?"GOOD":s>=50?"FAIR":"WEAK";return e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500 uppercase tracking-wider font-semibold mb-1",children:"Lineup Confidence"}),e.jsxs("div",{className:"text-5xl font-black tracking-tight",children:[s,"%"]})]}),e.jsx("div",{className:`px-6 py-3 rounded-full text-white font-black text-sm uppercase tracking-wider ${t()}`,children:a()})]}),e.jsx("div",{className:"relative w-full h-4 bg-gray-100 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${t()} transition-all duration-500`,style:{width:`${s}%`}})}),e.jsx("p",{className:"text-xs text-gray-500 mt-3 text-center uppercase tracking-wider font-semibold",children:"Based on matchups, injuries, and analytics"})]})}function Q({player:s,recommendation:t,grade:a,confidence:u,matchup_score:n,weather_score:c,injury_score:S,advanced_stats_score:N,projected_points:v,projected_range:j,reasons:x}){const R=t==="START"?{container:"bg-black text-white border-black",badge:"bg-white text-black",icon:""}:t==="CONSIDER"?{container:"bg-gray-200 text-black border-gray-300",badge:"bg-gray-600 text-white",icon:"?"}:{container:"bg-gray-100 text-gray-500 border-gray-200 opacity-60",badge:"bg-gray-400 text-white",icon:"�"};return e.jsxs("div",{className:`relative border rounded-2xl p-6 hover:scale-105 transition-transform ${R.container}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-xl font-black tracking-tight mb-1",children:s.name}),e.jsxs("div",{className:"text-sm uppercase tracking-wider font-semibold opacity-70",children:[s.position," � ",s.team]})]}),e.jsx("div",{className:"text-5xl font-black opacity-50",children:a})]}),e.jsxs("div",{className:`inline-flex items-center gap-2 px-5 py-2 rounded-full font-black text-sm uppercase tracking-wider mb-6 ${R.badge}`,children:[e.jsx("span",{className:"text-lg",children:R.icon}),t]}),e.jsxs("div",{className:"mb-6 pb-6 border-b border-current opacity-30",children:[e.jsx("div",{className:"text-xs uppercase tracking-wider font-semibold opacity-70 mb-1",children:"Projected Points"}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-3xl font-black",children:v.toFixed(1)}),e.jsxs("span",{className:"text-sm opacity-50",children:["(",j[0].toFixed(1)," - ",j[1].toFixed(1),")"]})]})]}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsx(Z,{label:"Matchup",score:n}),e.jsx(Z,{label:"Weather",score:c}),e.jsx(Z,{label:"Health",score:S}),e.jsx(Z,{label:"Stats",score:N})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"text-xs uppercase tracking-wider font-semibold opacity-70 mb-2",children:["Confidence: ",u,"%"]}),e.jsx("div",{className:"w-full bg-current opacity-20 rounded-full h-2",children:e.jsx("div",{className:"bg-current opacity-100 h-full rounded-full transition-all",style:{width:`${u}%`}})})]}),x.length>0&&e.jsx("div",{className:"text-xs opacity-70 space-y-1",children:x.map((l,g)=>e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{children:'"'}),e.jsx("span",{children:l})]},g))})]})}function Z({label:s,score:t}){return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-xs uppercase tracking-wider font-semibold opacity-70",children:s}),e.jsxs("span",{className:"text-xs font-bold",children:[t,"/100"]})]}),e.jsx("div",{className:"w-full bg-current opacity-20 rounded-full h-1.5",children:e.jsx("div",{className:"bg-current opacity-100 h-full rounded-full transition-all",style:{width:`${t}%`}})})]})}function Ee({starters:s,bench:t}){const a=s.filter(n=>n.recommendation==="START"),u=s.filter(n=>n.recommendation==="CONSIDER");return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-3xl font-black tracking-tight mb-2",children:"STARTERS"}),e.jsx("p",{className:"text-sm text-gray-500 uppercase tracking-wider font-semibold",children:"Recommended for your lineup"})]}),a.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"w-3 h-3 bg-black rounded-full"}),e.jsxs("h3",{className:"text-lg font-black uppercase tracking-tight",children:["START (",a.length,")"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:a.map((n,c)=>e.jsx(Q,{...n},c))})]}),u.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"w-3 h-3 bg-gray-600 rounded-full"}),e.jsxs("h3",{className:"text-lg font-black uppercase tracking-tight",children:["CONSIDER (",u.length,")"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:u.map((n,c)=>e.jsx(Q,{...n},c))})]}),s.length===0&&e.jsxs("div",{className:"text-center py-12 text-gray-400",children:[e.jsx("p",{className:"text-lg font-semibold",children:"No starters recommended"}),e.jsx("p",{className:"text-sm mt-2",children:"Add players to your roster to see recommendations"})]})]}),t.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-3xl font-black tracking-tight mb-2",children:"BENCH"}),e.jsx("p",{className:"text-sm text-gray-500 uppercase tracking-wider font-semibold",children:"Sit these players this week"})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"w-3 h-3 bg-gray-400 rounded-full"}),e.jsxs("h3",{className:"text-lg font-black uppercase tracking-tight",children:["BENCH (",t.length,")"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:t.map((n,c)=>e.jsx(Q,{...n},c))})]})]})}function Pe({rosterId:s}){const[t,a]=i.useState(!1),[u,n]=i.useState(""),[c,S]=i.useState(null),[N,v]=i.useState(5),[j]=i.useState(2024);i.useEffect(()=>{x()},[s,N]);const x=async()=>{a(!0),n("");try{const l=localStorage.getItem("auth_token"),g=await fetch(`/api/rosters/${s}/weekly-lineup?week=${N}&season=${j}`,{headers:{Authorization:`Bearer ${l}`}});if(!g.ok)throw new Error("Failed to load weekly lineup");const L=await g.json();S(L.data)}catch(l){console.error("Error loading weekly lineup:",l),n("Failed to load weekly lineup. Please try again.")}finally{a(!1)}},p=l=>{v(l)},R=async()=>{a(!0),n("");try{const l=localStorage.getItem("auth_token");if(!(await fetch(`/api/rosters/${s}/analyze`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`},body:JSON.stringify({week:N,season:j})})).ok)throw new Error("Failed to analyze roster");await x()}catch(l){console.error("Error analyzing roster:",l),n("Failed to analyze roster. Please try again.")}finally{a(!1)}};return t&&!c?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-black border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-lg font-semibold text-gray-600",children:"Loading weekly lineup..."})]})}):u?e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6 text-center",children:[e.jsx("p",{className:"text-red-600 font-semibold mb-4",children:u}),e.jsx(f,{onClick:x,variant:"outline",children:"Try Again"})]}):c?e.jsxs("div",{className:"space-y-6",children:[e.jsx(Ce,{week:c.week,season:c.season,onWeekChange:p}),e.jsx(Ae,{score:c.overall_confidence}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsx(f,{onClick:R,disabled:t,className:"bg-black text-white hover:bg-gray-900 font-bold",children:t?"ANALYZING...":"ANALYZE ALL PLAYERS"}),e.jsx(f,{variant:"outline",className:"font-bold",children:"COMPARE PLAYERS"}),e.jsx(f,{variant:"outline",className:"font-bold",children:"TRADE ANALYZER"})]}),e.jsx(Ee,{starters:c.starters,bench:c.bench}),c.starters.length===0&&c.bench.length===0&&e.jsx("div",{className:"text-center py-20 bg-gray-50 rounded-xl border border-gray-200",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx("div",{className:"text-6xl mb-6",children:"=�"}),e.jsx("h3",{className:"text-2xl font-black mb-3",children:"NO PLAYERS IN ROSTER"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Add players to your roster to see weekly start/sit recommendations."}),e.jsx(f,{className:"bg-black text-white hover:bg-gray-900 font-bold",children:"ADD PLAYERS"})]})})]}):null}const V=[{slot:"QB",label:"QB",isStarter:!0},{slot:"RB1",label:"RB",isStarter:!0},{slot:"RB2",label:"RB",isStarter:!0},{slot:"WR1",label:"WR",isStarter:!0},{slot:"WR2",label:"WR",isStarter:!0},{slot:"WR3",label:"WR",isStarter:!0},{slot:"TE",label:"TE",isStarter:!0},{slot:"FLEX",label:"FLEX",isStarter:!0},{slot:"K",label:"K",isStarter:!0},{slot:"DEF",label:"DEF",isStarter:!0}],re={HEALTHY:"bg-green-500",PROBABLE:"bg-blue-500",QUESTIONABLE:"bg-yellow-500",DOUBTFUL:"bg-orange-500",OUT:"bg-red-500"},le={START:{border:"border-green-500",bg:"bg-green-50 dark:bg-green-950/20",text:"text-green-700 dark:text-green-400"},SIT:{border:"border-red-500",bg:"bg-red-50 dark:bg-red-950/20",text:"text-red-700 dark:text-red-400"},CONSIDER:{border:"border-yellow-500",bg:"bg-yellow-50 dark:bg-yellow-950/20",text:"text-yellow-700 dark:text-yellow-400"}};function Te({rosterId:s,onRosterUpdate:t}){var M;const[a,u]=i.useState(null),[n,c]=i.useState(new Map),[S,N]=i.useState(!0),[v,j]=i.useState(!1),[x,p]=i.useState(""),[R,l]=i.useState(null),[g,L]=i.useState("weekly");i.useEffect(()=>{W()},[s]);const W=async()=>{try{N(!0);const d=await ge(s);u(d.data)}catch(d){p("Failed to load roster"),console.error(d)}finally{N(!1)}},E=async()=>{try{j(!0),p(""),await je(s),await W()}catch(d){p("Failed to analyze roster"),console.error(d)}finally{j(!1)}},z=d=>{var m;return(m=a==null?void 0:a.players)==null?void 0:m.find(o=>o.roster_slot===d)},H=()=>{var o;const d=((o=a==null?void 0:a.players)==null?void 0:o.filter(b=>V.some(C=>C.isStarter&&C.slot===b.roster_slot)))||[];if(d.length===0)return 0;const m=d.reduce((b,C)=>{const Y=n.get(C.id);return b+((Y==null?void 0:Y.projected_points)||0)},0);return Math.round(m/d.length*5)},O=()=>{var m;return(((m=a==null?void 0:a.players)==null?void 0:m.filter(o=>V.some(b=>b.isStarter&&b.slot===o.roster_slot)))||[]).reduce((o,b)=>{const C=n.get(b.id);return o+((C==null?void 0:C.projected_points)||0)},0)},B=()=>{var m;const d=((m=a==null?void 0:a.players)==null?void 0:m.filter(o=>V.some(b=>b.isStarter&&b.slot===o.roster_slot)))||[];return{start:d.filter(o=>{const b=n.get(o.id);return(b==null?void 0:b.recommendation)==="START"}).length,sit:d.filter(o=>{const b=n.get(o.id);return(b==null?void 0:b.recommendation)==="SIT"}).length,consider:d.filter(o=>{const b=n.get(o.id);return(b==null?void 0:b.recommendation)==="CONSIDER"}).length}},$=()=>{var d;return((d=a==null?void 0:a.players)==null?void 0:d.filter(m=>m.injury_status!=="HEALTHY").length)||0};if(S)return e.jsx(y,{children:e.jsx(w,{className:"py-8",children:e.jsx("p",{className:"text-center text-muted-foreground",children:"Loading roster..."})})});if(!a)return e.jsx(y,{children:e.jsx(w,{className:"py-8",children:e.jsx("p",{className:"text-center text-red-600",children:"Failed to load roster"})})});const h=H(),A=O(),P=B(),D=$(),I=((M=a.players)==null?void 0:M.filter(d=>d.roster_slot==="BENCH"))||[];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(y,{children:[e.jsx(T,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(F,{className:"text-2xl",children:a.name}),a.league_name&&e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[a.league_name," • ",a.scoring_type]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex gap-2 border rounded-lg p-1",children:[e.jsx(f,{variant:g==="weekly"?"default":"ghost",size:"sm",onClick:()=>L("weekly"),className:"px-4 font-bold",children:"WEEKLY"}),e.jsx(f,{variant:g==="classic"?"default":"ghost",size:"sm",onClick:()=>L("classic"),className:"px-4 font-bold",children:"CLASSIC"})]}),e.jsx(f,{onClick:E,disabled:v,size:"lg",className:"min-w-40",children:v?e.jsxs(e.Fragment,{children:[e.jsx(oe,{className:"mr-2 h-4 w-4 animate-spin"}),"Analyzing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(xe,{className:"mr-2 h-4 w-4"}),"Analyze Roster"]})})]})]})}),e.jsx(w,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"p-4 border rounded-lg bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-950/20 dark:to-blue-900/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Roster Strength"}),e.jsx(se,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs("p",{className:"text-3xl font-bold text-blue-700 dark:text-blue-400",children:[h,e.jsx("span",{className:"text-lg text-muted-foreground",children:"/100"})]})]}),e.jsxs("div",{className:"p-4 border rounded-lg bg-gradient-to-br from-green-50 to-green-100 dark:from-green-950/20 dark:to-green-900/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Projected Points"}),e.jsx(me,{className:"h-4 w-4 text-green-600"})]}),e.jsx("p",{className:"text-3xl font-bold text-green-700 dark:text-green-400",children:A.toFixed(1)})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground mb-2",children:"Recommendations"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:P.start}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Start"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:P.consider}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Consider"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-red-600",children:P.sit}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Sit"})]})]})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Injury Report"}),e.jsx(he,{className:"h-4 w-4 text-orange-600"})]}),D>0?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-3xl font-bold text-orange-700 dark:text-orange-400",children:D}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Players injured"})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-2xl font-bold text-green-700 dark:text-green-400",children:"All Healthy"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"✓ No concerns"})]})]})]})})]}),x&&e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-950 text-red-600 dark:text-red-400 rounded-md text-sm",children:x}),g==="weekly"?e.jsx(Pe,{rosterId:s}):e.jsxs(e.Fragment,{children:[e.jsxs(y,{children:[e.jsx(T,{children:e.jsxs(F,{className:"flex items-center gap-2",children:[e.jsx(se,{className:"h-5 w-5"}),"Starting Lineup"]})}),e.jsx(w,{children:e.jsx("div",{className:"space-y-3",children:V.map(d=>{const m=z(d.slot),o=m?n.get(m.id):void 0,b=o!=null&&o.recommendation?le[o.recommendation]:{border:"border-gray-200",bg:""};return e.jsx("div",{className:`flex items-center justify-between p-4 border-2 rounded-lg transition-all ${b.border} ${b.bg}`,children:e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("div",{className:"w-16 text-center",children:e.jsx(k,{variant:"outline",className:"font-bold",children:d.label})}),m?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:q(m.player_id),alt:m.player_name,className:"w-12 h-12 rounded-full object-cover border-2 border-gray-200 dark:border-gray-700",onError:C=>{C.currentTarget.src="https://a.espncdn.com/combiner/i?img=/i/headshots/nophoto.png&w=200&h=146"}}),m.team&&e.jsx("img",{src:U(m.team),alt:m.team,className:"w-8 h-8 object-contain",onError:C=>C.currentTarget.style.display="none"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-semibold",children:m.player_name}),e.jsx(k,{variant:"outline",className:"text-xs",children:m.position}),e.jsx(k,{variant:"outline",className:"text-xs",children:m.team}),m.injury_status!=="HEALTHY"&&e.jsx(k,{className:`text-xs text-white ${re[m.injury_status]}`,children:m.injury_status})]}),o&&e.jsxs("div",{className:"flex items-center gap-3 mt-1 text-sm",children:[o.opponent_team&&e.jsxs("span",{className:"text-muted-foreground",children:["vs ",o.opponent_team]}),o.projected_points!==void 0&&e.jsxs("span",{className:"font-semibold text-green-700 dark:text-green-400",children:[o.projected_points.toFixed(1)," pts"]}),o.matchup_score!==void 0&&e.jsxs("span",{className:"text-muted-foreground",children:["Matchup: ",o.matchup_score,"/100"]}),o.ai_grade&&e.jsxs(k,{variant:"outline",className:"text-xs",children:["Grade: ",o.ai_grade]})]})]}),(o==null?void 0:o.recommendation)&&e.jsx(k,{className:`${le[o.recommendation].text} font-bold`,children:o.recommendation}),e.jsx("div",{className:"flex gap-2",children:e.jsx(f,{size:"sm",variant:"outline",children:e.jsx(te,{className:"h-4 w-4"})})})]}):e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Empty slot"}),e.jsx(f,{size:"sm",onClick:()=>l(d.slot),className:"mt-2",children:"Add Player"})]})]})},d.slot)})})})]}),I.length>0&&e.jsxs(y,{children:[e.jsx(T,{children:e.jsxs(F,{className:"flex items-center gap-2",children:[e.jsx(ue,{className:"h-5 w-5"}),"Bench (",I.length,")"]})}),e.jsx(w,{children:e.jsx("div",{className:"space-y-2",children:I.map(d=>{const m=n.get(d.id);return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-accent transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("img",{src:q(d.player_id),alt:d.player_name,className:"w-10 h-10 rounded-full object-cover border border-gray-200 dark:border-gray-700",onError:o=>{o.currentTarget.src="https://a.espncdn.com/combiner/i?img=/i/headshots/nophoto.png&w=200&h=146"}}),d.team&&e.jsx("img",{src:U(d.team),alt:d.team,className:"w-6 h-6 object-contain",onError:o=>o.currentTarget.style.display="none"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-medium text-sm",children:d.player_name}),e.jsx(k,{variant:"outline",className:"text-xs",children:d.position}),d.injury_status!=="HEALTHY"&&e.jsx(k,{className:`text-xs text-white ${re[d.injury_status]}`,children:d.injury_status})]}),m&&m.projected_points!==void 0&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Projected: ",m.projected_points.toFixed(1)," pts"]})]})]}),e.jsx(f,{size:"sm",variant:"ghost",children:e.jsx(te,{className:"h-4 w-4"})})]},d.id)})})})]}),R&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-900 p-6 rounded-lg max-w-2xl w-full mx-4 max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["Add Player to ",R]}),e.jsx(f,{variant:"ghost",size:"sm",onClick:()=>l(null),children:"✕"})]}),e.jsx(Re,{onSelectPlayer:d=>{l(null)}})]})})]})]})}function Fe({playerId:s,playerName:t,onClose:a}){var R;const[u,n]=i.useState(!0),[c,S]=i.useState(null),[N,v]=i.useState("");i.useEffect(()=>{j()},[s]);const j=async()=>{try{n(!0);const l=await pe(s);S(l.data)}catch(l){v("Failed to load player details"),console.error(l)}finally{n(!1)}},x=((R=c==null?void 0:c.player)==null?void 0:R.data)||(c==null?void 0:c.player),p=(c==null?void 0:c.recent_games)||[];return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:a,children:e.jsxs("div",{className:"bg-background rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto m-4",onClick:l=>l.stopPropagation(),children:[e.jsxs("div",{className:"sticky top-0 bg-background border-b p-4 flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold",children:t}),e.jsx(f,{variant:"outline",size:"sm",onClick:a,children:"Close"})]}),e.jsxs("div",{className:"p-6",children:[u&&e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-muted-foreground",children:"Loading player details..."})}),N&&e.jsx("div",{className:"bg-red-50 dark:bg-red-950 text-red-600 dark:text-red-400 p-4 rounded-md",children:N}),!u&&!N&&x&&e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"mb-6",children:e.jsx(w,{className:"pt-6",children:e.jsxs("div",{className:"flex items-start gap-6",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{src:q(x.nfl_id),alt:t,className:"w-32 h-32 object-cover rounded-lg border-2 border-gray-200 dark:border-gray-700",onError:l=>{l.currentTarget.src="https://a.espncdn.com/combiner/i?img=/i/headshots/nophoto.png&w=200&h=146"}})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(k,{variant:"outline",className:"text-lg",children:x.position}),x.jersey_number&&e.jsxs(k,{variant:"outline",className:"text-lg",children:["#",x.jersey_number]}),x.team_id&&e.jsx("img",{src:U(x.team),alt:x.team,className:"w-8 h-8 object-contain",onError:l=>l.currentTarget.style.display="none"}),e.jsx(k,{className:x.status==="active"?"bg-green-600":"bg-gray-600",children:x.status})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[x.height_inches&&e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Height"}),e.jsxs("p",{className:"font-semibold",children:[Math.floor(x.height_inches/12),"'",x.height_inches%12,'"']})]}),x.weight_pounds&&e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Weight"}),e.jsxs("p",{className:"font-semibold",children:[x.weight_pounds," lbs"]})]}),x.team&&e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Team"}),e.jsx("p",{className:"font-semibold",children:x.team})]}),x.nfl_id&&e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"NFL ID"}),e.jsx("p",{className:"font-semibold",children:x.nfl_id})]})]})]})]})})}),e.jsxs(y,{children:[e.jsx(T,{children:e.jsxs(F,{children:["Last ",p.length," Games"]})}),e.jsx(w,{children:p.length===0?e.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No recent game data available"}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"grid grid-cols-6 gap-2 text-sm font-semibold text-muted-foreground pb-2 border-b",children:[e.jsx("div",{children:"Week"}),e.jsx("div",{children:"Opp"}),e.jsx("div",{className:"text-right",children:"Yds"}),e.jsx("div",{className:"text-right",children:"TD"}),e.jsx("div",{className:"text-right",children:"Rec"}),e.jsx("div",{className:"text-right",children:"Pts"})]}),p.map((l,g)=>e.jsxs("div",{className:"grid grid-cols-6 gap-2 text-sm py-2 border-b border-gray-100 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-900",children:[e.jsx("div",{children:l.week||l.game_week||"-"}),e.jsx("div",{className:"font-semibold",children:l.opponent_team||l.opponent||"-"}),e.jsx("div",{className:"text-right",children:l.yards||l.passing_yards||l.rushing_yards||l.receiving_yards||0}),e.jsx("div",{className:"text-right",children:l.touchdowns||l.passing_tds||l.rushing_tds||l.receiving_tds||0}),e.jsx("div",{className:"text-right",children:l.receptions||l.targets||"-"}),e.jsx("div",{className:"text-right font-semibold",children:l.fantasy_points?l.fantasy_points.toFixed(1):"-"})]},g)),p.length>0&&e.jsxs("div",{className:"grid grid-cols-6 gap-2 text-sm py-2 font-bold bg-gray-50 dark:bg-gray-900",children:[e.jsx("div",{className:"col-span-2",children:"Average"}),e.jsx("div",{className:"text-right",children:(p.reduce((l,g)=>l+(g.yards||g.passing_yards||g.rushing_yards||g.receiving_yards||0),0)/p.length).toFixed(1)}),e.jsx("div",{className:"text-right",children:(p.reduce((l,g)=>l+(g.touchdowns||g.passing_tds||g.rushing_tds||g.receiving_tds||0),0)/p.length).toFixed(1)}),e.jsx("div",{className:"text-right",children:"-"}),e.jsx("div",{className:"text-right",children:p.some(l=>l.fantasy_points!==void 0)?(p.reduce((l,g)=>l+(g.fantasy_points||0),0)/p.length).toFixed(1):"-"})]})]})})]})]})]})]})})}const G=[{label:"Gathering player data...",icon:"📊"},{label:"Analyzing matchups...",icon:"⚔️"},{label:"Evaluating defenses...",icon:"🛡️"},{label:"AI generating insights...",icon:"🤖"},{label:"Finalizing recommendations...",icon:"✨"}];function Le({totalPlayers:s,completedPlayers:t}){const[a,u]=i.useState(0),n=s>0?t/s*100:0;i.useEffect(()=>{const N=Math.floor(n/100*G.length);u(Math.min(N,G.length-1))},[n]);const c=n,S=Math.sin(n/100*Math.PI)*30;return e.jsxs("div",{className:"w-full py-8 px-6 bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-950/20 dark:to-emerald-950/20 rounded-lg border border-green-200 dark:border-green-800",children:[e.jsxs("div",{className:"relative w-full h-32 mb-6 bg-gradient-to-b from-green-600 to-green-700 rounded-lg overflow-hidden shadow-inner",children:[[0,20,40,60,80,100].map(N=>e.jsx("div",{className:"absolute top-0 bottom-0 w-0.5 bg-white/30",style:{left:`${N}%`}},N)),e.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-[10%] bg-blue-600/40"}),e.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-[10%] bg-red-600/40"}),e.jsx("div",{className:"absolute transition-all duration-300 ease-out",style:{left:`${c}%`,bottom:`${50+S}%`,transform:`translateX(-50%) rotate(${c*3.6}deg)`},children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"text-4xl animate-bounce",style:{animationDuration:"0.6s"},children:"🏈"}),n>0&&e.jsxs("div",{className:"absolute top-1/2 -right-8 flex gap-1",children:[e.jsx("div",{className:"w-1 h-1 rounded-full bg-white/40 animate-pulse"}),e.jsx("div",{className:"w-1 h-1 rounded-full bg-white/30 animate-pulse",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-1 h-1 rounded-full bg-white/20 animate-pulse",style:{animationDelay:"0.2s"}})]})]})}),e.jsx("div",{className:"absolute left-[5%] top-1/2 -translate-y-1/2 text-2xl",children:"🏁"}),e.jsx("div",{className:"absolute right-[5%] top-1/2 -translate-y-1/2 text-2xl",children:"🎯"})]}),e.jsx("div",{className:"relative w-full h-3 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden mb-4 shadow-inner",children:e.jsx("div",{className:"absolute top-0 left-0 h-full bg-gradient-to-r from-blue-500 via-green-500 to-emerald-500 transition-all duration-500 ease-out rounded-full shadow-lg",style:{width:`${n}%`},children:e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent animate-shimmer"})})}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[e.jsx("span",{className:"text-2xl animate-pulse",children:G[a].icon}),e.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:G[a].label})]}),e.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Analyzing ",t," of ",s," players (",Math.round(n),"%)"]})]}),e.jsx("div",{className:"flex justify-center gap-2 mt-4",children:G.map((N,v)=>e.jsx("div",{className:`w-2 h-2 rounded-full transition-all duration-300 ${v<=a?"bg-green-600 dark:bg-green-400 scale-110":"bg-gray-300 dark:bg-gray-600"}`,title:N.label},v))})]})}const Me={"A+":"bg-green-600",A:"bg-green-500",B:"bg-blue-500",C:"bg-yellow-500",D:"bg-orange-500",F:"bg-red-500"},ze={START:"bg-green-600",CONSIDER:"bg-yellow-600",SIT:"bg-red-600"};function De({matchupId:s}){var O,B,$;const[t,a]=i.useState(null),[u,n]=i.useState(!0),[c,S]=i.useState(!1),[N,v]=i.useState(""),[j,x]=i.useState(null);i.useEffect(()=>{p()},[s]);const p=async()=>{try{n(!0);const h=await ae(s);a(h.data)}catch(h){v("Failed to load matchup"),console.error(h)}finally{n(!1)}},R=async()=>{try{S(!0),v(""),await be(s),await p(),l()}catch(h){v("Failed to analyze matchup"),console.error(h),S(!1)}},l=()=>{const h=setInterval(async()=>{var A;try{const D=(await ae(s)).data,I=(A=D.analysis)==null?void 0:A.every(M=>M.analysis_status==="completed"||M.analysis_status==="failed");a(D),I&&(clearInterval(h),S(!1))}catch(P){console.error("Polling error:",P),clearInterval(h),S(!1)}},3e3);setTimeout(()=>{clearInterval(h),S(!1)},3e5)};if(u)return e.jsx(y,{children:e.jsx(w,{className:"py-8",children:e.jsx("p",{className:"text-center text-muted-foreground",children:"Loading matchup..."})})});if(!t)return e.jsx(y,{children:e.jsx(w,{className:"py-8",children:e.jsx("p",{className:"text-center text-red-600",children:"Matchup not found"})})});const g=((O=t.analysis)==null?void 0:O.filter(h=>h.is_user_player))||[],L=g.filter(h=>h.recommendation==="START"),W=g.filter(h=>h.recommendation==="SIT"),E=g.filter(h=>h.recommendation==="CONSIDER"),z=((B=t.analysis)==null?void 0:B.some(h=>h.analysis_status==="analyzing"||h.reasoning==="Generating AI analysis..."))||!1;console.log("Debug - analyzing:",c),console.log("Debug - hasAnalysisInProgress:",z),console.log("Debug - matchup.analysis:",($=t.analysis)==null?void 0:$.map(h=>({name:h.player_name,status:h.analysis_status,reasoning:h.reasoning})));const H=g.length>0?(g.reduce((h,A)=>h+A.projected_points,0)/g.length).toFixed(2):"0";return e.jsxs("div",{className:"space-y-6",children:[e.jsx(y,{children:e.jsx(T,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs(F,{children:["Week ",t.week," Analysis - ",t.season]}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[t.user_roster_name," vs Real NFL Defenses"]})]}),e.jsx(f,{onClick:R,disabled:c,className:"min-w-32",children:c?"Analyzing...":t.analyzed?"Re-analyze":"Analyze"})]})})}),N&&e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-950 text-red-600 dark:text-red-400 rounded-md text-sm",children:N}),(c||z)&&t.analysis&&t.analysis.length>0&&e.jsx(Le,{totalPlayers:t.analysis.length,completedPlayers:t.analysis.filter(h=>h.analysis_status==="completed"||h.analysis_status==="failed").length}),t.analyzed&&t.analysis&&t.analysis.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(y,{children:e.jsxs(w,{className:"pt-6",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Avg Projected"}),e.jsxs("p",{className:"text-2xl font-bold",children:[H," pts"]})]})}),e.jsx(y,{children:e.jsxs(w,{className:"pt-6",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Should Start"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:L.length})]})}),e.jsx(y,{children:e.jsxs(w,{className:"pt-6",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Monitor"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:E.length})]})}),e.jsx(y,{children:e.jsxs(w,{className:"pt-6",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Should Sit"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:W.length})]})})]}),e.jsxs(y,{children:[e.jsx(T,{children:e.jsx(F,{children:"Your Players - Start/Sit Recommendations"})}),e.jsx(w,{children:e.jsx("div",{className:"space-y-4",children:g.map(h=>e.jsx(Ie,{analysis:h,onPlayerClick:(A,P)=>x({id:A,name:P})},h.id))})})]})]}),!t.analyzed&&e.jsx(y,{children:e.jsx(w,{className:"py-12",children:e.jsxs("div",{className:"text-center text-muted-foreground",children:[e.jsx("p",{className:"text-lg mb-2",children:"No analysis yet"}),e.jsx("p",{className:"text-sm",children:'Click "Analyze" to generate start/sit recommendations'})]})})}),j&&e.jsx(Fe,{playerId:j.id,playerName:j.name,onClose:()=>x(null)})]})}function Ie({analysis:s,onPlayerClick:t}){const a=Me[s.ai_grade]||"bg-gray-500",u=ze[s.recommendation]||"bg-gray-500",n=s.analysis_status==="analyzing"||s.reasoning==="Generating AI analysis...",c=s.analysis_status==="failed";return e.jsxs("div",{className:"border rounded-lg p-4 relative",children:[n&&e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-blue-500 border-t-transparent rounded-full"})}),e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.team&&e.jsx("img",{src:U(s.team),alt:s.team,className:"w-6 h-6 object-contain",onError:S=>S.currentTarget.style.display="none"}),e.jsx("h3",{className:"font-semibold text-lg cursor-pointer hover:text-blue-600 transition-colors",onClick:()=>t(s.player_id,s.player_name),children:s.player_name}),e.jsx(k,{variant:"outline",children:s.position}),e.jsx(k,{variant:"outline",children:s.team}),s.injury_status&&s.injury_status!=="HEALTHY"&&e.jsx(k,{className:"bg-orange-500 text-white",children:s.injury_status})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(k,{className:`${a} text-white`,children:s.ai_grade}),e.jsx(k,{className:`${u} text-white`,children:s.recommendation})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Matchup Score"}),e.jsx("p",{className:"text-lg font-semibold",children:s.matchup_score.toFixed(1)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Projected Points"}),e.jsx("p",{className:"text-lg font-semibold",children:s.projected_points.toFixed(1)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Confidence"}),e.jsxs("p",{className:"text-lg font-semibold",children:[s.confidence_score.toFixed(0),"%"]})]})]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"text-muted-foreground mb-1",children:"AI Analysis:"}),n?e.jsx("div",{className:"flex items-center gap-2 text-blue-600",children:e.jsx("div",{className:"animate-pulse",children:"Generating AI analysis..."})}):c?e.jsx("p",{className:"text-red-600",children:"Failed to generate AI analysis"}):e.jsx("p",{children:s.reasoning})]}),s.injury_impact&&s.injury_impact!=="No impact"&&e.jsxs("div",{className:"mt-2 p-2 bg-orange-50 dark:bg-orange-950 rounded text-sm",children:[e.jsx("span",{className:"font-medium",children:"Injury Impact:"})," ",s.injury_impact]})]})}function We({rosterId:s}){const[t,a]=i.useState(null),[u,n]=i.useState(!0),[c,S]=i.useState("");i.useEffect(()=>{N()},[s]);const N=async()=>{try{n(!0);const j=await fe(s);a(j.data)}catch(j){S("Failed to load season matchups"),console.error(j)}finally{n(!1)}};if(u)return e.jsx(y,{children:e.jsx(w,{className:"py-8",children:e.jsx("p",{className:"text-center text-muted-foreground",children:"Loading season matchups..."})})});if(c||!t)return e.jsx(y,{children:e.jsx(w,{className:"py-8",children:e.jsx("p",{className:"text-center text-red-600",children:c||"No data available"})})});const v=Object.keys(t.matchups).map(Number).sort((j,x)=>j-x);return e.jsxs("div",{className:"space-y-6",children:[e.jsx(y,{children:e.jsxs(T,{children:[e.jsxs(F,{children:[t.roster_name," - ",t.season," Season Matchups"]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[t.total_weeks," weeks available"]})]})}),e.jsx("div",{className:"space-y-4",children:v.map(j=>e.jsxs(y,{children:[e.jsx(T,{children:e.jsxs(F,{className:"text-lg",children:["Week ",j]})}),e.jsx(w,{children:e.jsx("div",{className:"space-y-2",children:t.matchups[j].map((x,p)=>e.jsx(Oe,{matchup:x},p))})})]},j))})]})}function Oe({matchup:s}){const t=s.player,a=!s.has_game||s.opponent_team===null;return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:q(t.player_id),alt:t.player_name,className:"w-10 h-10 rounded-full object-cover border border-gray-200 dark:border-gray-700",onError:u=>{u.currentTarget.src="https://a.espncdn.com/combiner/i?img=/i/headshots/nophoto.png&w=200&h=146"}}),t.team&&e.jsx("img",{src:U(t.team),alt:t.team,className:"w-6 h-6 object-contain",onError:u=>u.currentTarget.style.display="none"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:t.player_name}),e.jsxs("div",{className:"flex gap-2 mt-1",children:[e.jsx(k,{variant:"outline",children:t.position}),e.jsx(k,{variant:"outline",children:t.team})]})]})]}),e.jsx("div",{className:"text-right",children:a?e.jsx(k,{className:"bg-gray-500 text-white",children:"BYE"}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"vs"}),s.opponent_team&&e.jsx("img",{src:U(s.opponent_team),alt:s.opponent_team,className:"w-6 h-6 object-contain",onError:u=>u.currentTarget.style.display="none"}),e.jsx(k,{className:"bg-blue-600 text-white",children:s.opponent_team})]})})]})}function Ge(){const[s,t]=i.useState([]),[a,u]=i.useState(null),[n,c]=i.useState(null),[S,N]=i.useState([]),[v,j]=i.useState("rosters"),[x,p]=i.useState(!1),[R,l]=i.useState(!1),[g,L]=i.useState(!0),[W,E]=i.useState(""),[z,H]=i.useState(""),[O,B]=i.useState(""),[$,h]=i.useState("PPR"),[A,P]=i.useState(1),[D,I]=i.useState(2025),[M,d]=i.useState(null),[m,o]=i.useState([]);i.useEffect(()=>{Y(),J(),b()},[]);const b=async()=>{try{const r=await Ne();r.data&&(P(r.data.week),I(r.data.season),C(r.data.season))}catch(r){console.error("Failed to load current week:",r)}},C=async r=>{try{const _=await ye(r);_.data&&o(_.data.available_weeks)}catch(_){console.error("Failed to load available weeks:",_)}},Y=async()=>{try{L(!0);const r=await ve();t(r.data||[]),r.data&&r.data.length>0&&!a&&u(r.data[0].id)}catch(r){E("Failed to load rosters"),console.error(r)}finally{L(!1)}},J=async()=>{try{const r=await we();N(r.data||[])}catch(r){console.error("Failed to load matchups:",r)}},ne=async r=>{if(r.preventDefault(),!!z)try{await Se({name:z,league_name:O,scoring_type:$}),H(""),B(""),p(!1),await Y()}catch(_){E("Failed to create roster"),console.error(_)}},ie=async r=>{if(confirm("Are you sure you want to delete this roster?"))try{await ke(r),a===r&&u(null),await Y()}catch(_){E("Failed to delete roster"),console.error(_)}},ce=async r=>{var _,ee;if(r.preventDefault(),!M){E("Please select a roster");return}if(m.length>0&&!m.includes(A)){E(`Schedule not available for Week ${A} yet. Please select a different week.`);return}try{const K=await _e({week:A,season:D,user_roster_id:M});l(!1),c(K.data.id),j("matchup"),await J()}catch(K){const de=((ee=(_=K.response)==null?void 0:_.data)==null?void 0:ee.error)||"Failed to create matchup";E(de),console.error(K)}};return e.jsxs("div",{className:"container mx-auto py-8 px-4",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-2",children:"Roster Management"}),e.jsx("p",{className:"text-sm md:text-base text-muted-foreground",children:"Build your roster and analyze weekly matchups"})]}),e.jsxs("div",{className:"flex gap-2 mb-6",children:[e.jsx(f,{variant:v==="rosters"?"default":"outline",onClick:()=>j("rosters"),children:"My Rosters"}),e.jsx(f,{variant:v==="matchup"?"default":"outline",onClick:()=>j("matchup"),children:"Weekly Matchup"}),e.jsx(f,{variant:v==="season"?"default":"outline",onClick:()=>j("season"),disabled:!a,children:"Season Matchups"})]}),W&&e.jsxs("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-950 text-red-600 dark:text-red-400 rounded-md text-sm",children:[W,e.jsx("button",{onClick:()=>E(""),className:"ml-2 underline",children:"Dismiss"})]}),v==="rosters"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(y,{children:[e.jsx(T,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(F,{children:"My Rosters"}),e.jsx(f,{size:"sm",onClick:()=>p(!0),children:"+ New"})]})}),e.jsx(w,{children:g?e.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading..."}):s.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"No rosters yet"}),e.jsx(f,{onClick:()=>p(!0),children:"Create Your First Roster"})]}):e.jsx("div",{className:"space-y-2",children:s.map(r=>e.jsx("div",{className:`p-3 border rounded-md cursor-pointer hover:bg-accent ${a===r.id?"bg-accent":""}`,onClick:()=>u(r.id),children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold",children:r.name}),r.league_name&&e.jsx("p",{className:"text-xs text-muted-foreground",children:r.league_name}),e.jsx(k,{variant:"outline",className:"text-xs mt-1",children:r.scoring_type})]}),e.jsx(f,{size:"sm",variant:"ghost",onClick:_=>{_.stopPropagation(),ie(r.id)},children:"🗑️"})]})},r.id))})})]})}),e.jsx("div",{className:"lg:col-span-2",children:a?e.jsx(Te,{rosterId:a},a):e.jsx(y,{children:e.jsx(w,{className:"py-12",children:e.jsx("p",{className:"text-center text-muted-foreground",children:"Select a roster to view"})})})})]}),v==="matchup"&&e.jsxs("div",{children:[e.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Weekly Matchups"}),e.jsx(f,{onClick:()=>l(!0),children:"+ New Matchup"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:S.map(r=>e.jsx(y,{className:`cursor-pointer hover:bg-accent ${n===r.id?"ring-2 ring-primary":""}`,onClick:()=>c(r.id),children:e.jsx(w,{className:"pt-6",children:e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Week ",r.week," • ",r.season]}),e.jsx("p",{className:"font-semibold",children:r.user_roster_name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"vs NFL Defenses"})]}),r.analyzed&&e.jsx(k,{className:"bg-green-600 text-white",children:"Analyzed"})]})})},r.id))}),n?e.jsx(De,{matchupId:n}):e.jsx(y,{children:e.jsx(w,{className:"py-12",children:e.jsx("p",{className:"text-center text-muted-foreground",children:"Select a matchup or create a new one to analyze"})})})]}),v==="season"&&a&&e.jsxs("div",{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Season Matchups"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"View all future matchups for the selected roster"})]}),e.jsx(We,{rosterId:a})]}),x&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs(y,{className:"max-w-md w-full mx-4",children:[e.jsx(T,{children:e.jsx(F,{children:"Create New Roster"})}),e.jsx(w,{children:e.jsxs("form",{onSubmit:ne,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium",children:["Roster Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(X,{value:z,onChange:r=>H(r.target.value),placeholder:"e.g., My Fantasy Team",required:!0,className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"League Name (Optional)"}),e.jsx(X,{value:O,onChange:r=>B(r.target.value),placeholder:"e.g., Friends League",className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Scoring Type"}),e.jsxs("select",{value:$,onChange:r=>h(r.target.value),className:"w-full mt-1 px-3 py-2 border rounded-md",children:[e.jsx("option",{value:"PPR",children:"PPR (Point Per Reception)"}),e.jsx("option",{value:"HALF_PPR",children:"Half PPR"}),e.jsx("option",{value:"STANDARD",children:"Standard"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(f,{type:"submit",className:"flex-1",children:"Create"}),e.jsx(f,{type:"button",variant:"outline",onClick:()=>p(!1),className:"flex-1",children:"Cancel"})]})]})})]})}),R&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs(y,{className:"max-w-md w-full mx-4",children:[e.jsx(T,{children:e.jsx(F,{children:"Create New Matchup"})}),e.jsx(w,{children:e.jsxs("form",{onSubmit:ce,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Week"}),e.jsx(X,{type:"number",min:"1",max:"18",value:A,onChange:r=>P(parseInt(r.target.value)),className:"mt-1"}),m.length>0&&!m.includes(A)&&e.jsx("p",{className:"text-xs text-orange-600 mt-1",children:"Schedule not available for this week yet"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Season"}),e.jsx(X,{type:"number",min:"2020",max:"2030",value:D,onChange:r=>{const _=parseInt(r.target.value);I(_),C(_)},className:"mt-1"})]})]}),m.length>0&&e.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-950 rounded-md text-sm",children:e.jsxs("p",{className:"font-medium text-blue-900 dark:text-blue-100",children:["Available weeks: ",m.join(", ")]})}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium",children:["Select Roster ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:M||"",onChange:r=>d(parseInt(r.target.value)),required:!0,className:"w-full mt-1 px-3 py-2 border rounded-md",children:[e.jsx("option",{value:"",children:"Select roster..."}),s.map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(f,{type:"submit",className:"flex-1",children:"Create"}),e.jsx(f,{type:"button",variant:"outline",onClick:()=>l(!1),className:"flex-1",children:"Cancel"})]})]})})]})})]})}export{Ge as RosterManagement};
