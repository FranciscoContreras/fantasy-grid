import{j as e}from"./ui-vendor-DMJGUSRC.js";import{C as m,a as g,b as u,c as _,d as j}from"./index-P1sKUvcP.js";import{B as b}from"./badge-B_E98cPM.js";import{r as n}from"./react-vendor-nf7bT_Uh.js";const f=({stats:r,loading:i})=>{if(i)return e.jsxs("div",{className:"p-6 bg-white rounded-lg shadow",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Advanced Stats"}),e.jsxs("div",{className:"animate-pulse space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3"})]})]});if(!r)return e.jsxs("div",{className:"p-6 bg-white rounded-lg shadow",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Advanced Stats"}),e.jsx("p",{className:"text-gray-500",children:"No advanced stats available"})]});const{position:t}=r;return e.jsxs("div",{className:"p-6 bg-white rounded-lg shadow space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Advanced Stats (Next Gen Stats)"}),e.jsxs("span",{className:"text-sm text-gray-500",children:[r.season," ",r.week?`Week ${r.week}`:"Season"]})]}),t==="QB"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.cpoe!==void 0&&e.jsx(a,{label:"CPOE",value:`${r.cpoe>0?"+":""}${r.cpoe.toFixed(1)}%`,description:"Completion % Over Expected",highlight:r.cpoe>3?"positive":r.cpoe<-3?"negative":void 0}),r.epa_per_play!==void 0&&e.jsx(a,{label:"EPA/Play",value:r.epa_per_play.toFixed(2),description:"Expected Points Added per Play",highlight:r.epa_per_play>.2?"positive":r.epa_per_play<-.1?"negative":void 0}),r.time_to_throw!==void 0&&e.jsx(a,{label:"Time to Throw",value:`${r.time_to_throw.toFixed(1)}s`,description:"Average time from snap to release",highlight:r.time_to_throw<2.3?"positive":void 0}),r.avg_air_yards!==void 0&&e.jsx(a,{label:"Avg Air Yards",value:r.avg_air_yards.toFixed(1),description:"Average depth of target"})]}),r.success_rate!==void 0&&e.jsx("div",{className:"pt-4 border-t",children:e.jsx(a,{label:"Success Rate",value:`${r.success_rate.toFixed(1)}%`,description:"% of plays with positive EPA",highlight:r.success_rate>50?"positive":void 0})})]}),(t==="WR"||t==="TE")&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.avg_separation!==void 0&&e.jsx(a,{label:"Avg Separation",value:`${r.avg_separation.toFixed(1)} yd`,description:"Average yards from nearest defender",highlight:r.avg_separation>3.5?"positive":r.avg_separation<2?"negative":void 0}),r.avg_yac!==void 0&&e.jsx(a,{label:"Avg YAC",value:`${r.avg_yac.toFixed(1)} yd`,description:"Yards After Catch per reception",highlight:r.avg_yac>6?"positive":void 0}),r.target_share!==void 0&&e.jsx(a,{label:"Target Share",value:`${r.target_share.toFixed(1)}%`,description:"% of team's targets",highlight:r.target_share>25?"positive":r.target_share<12?"negative":void 0}),r.wopr!==void 0&&e.jsx(a,{label:"WOPR",value:r.wopr.toFixed(2),description:"Weighted Opportunity Rating",highlight:r.wopr>.7?"positive":void 0})]}),r.snap_share!==void 0&&e.jsx("div",{className:"pt-4 border-t",children:e.jsx(a,{label:"Snap Share",value:`${r.snap_share.toFixed(1)}%`,description:"% of offensive snaps played",highlight:r.snap_share>80?"positive":r.snap_share<50?"negative":void 0})})]}),t==="RB"&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.rush_yards_over_expected_per_att!==void 0&&e.jsx(a,{label:"Yards Over Expected",value:`${r.rush_yards_over_expected_per_att>0?"+":""}${r.rush_yards_over_expected_per_att.toFixed(1)} yd`,description:"Per carry vs expected",highlight:r.rush_yards_over_expected_per_att>.5?"positive":r.rush_yards_over_expected_per_att<-.3?"negative":void 0}),r.success_rate!==void 0&&e.jsx(a,{label:"Success Rate",value:`${r.success_rate.toFixed(1)}%`,description:"% of carries with positive EPA",highlight:r.success_rate>50?"positive":void 0}),r.snap_share!==void 0&&e.jsx(a,{label:"Snap Share",value:`${r.snap_share.toFixed(1)}%`,description:"% of offensive snaps",highlight:r.snap_share>70?"positive":r.snap_share<40?"negative":void 0}),r.epa_per_play!==void 0&&e.jsx(a,{label:"EPA/Play",value:r.epa_per_play.toFixed(2),description:"Expected Points Added per play",highlight:r.epa_per_play>.15?"positive":void 0})]})}),r.epa_total!==void 0&&e.jsxs("div",{className:"pt-4 border-t",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"Total EPA This Season"}),e.jsxs("div",{className:"text-2xl font-bold",children:[r.epa_total>0?"+":"",r.epa_total.toFixed(1)]})]}),e.jsx("div",{className:"pt-4 border-t text-xs text-gray-500",children:e.jsx("p",{children:"Data provided by Next Gen Stats via Grid Iron Mind API v2"})})]})},a=({label:r,value:i,description:t,highlight:s})=>{const o=s==="positive"?"bg-green-50 border-green-200":s==="negative"?"bg-red-50 border-red-200":"bg-gray-50 border-gray-200",l=s==="positive"?"text-green-700":s==="negative"?"text-red-700":"text-gray-900";return e.jsxs("div",{className:`p-4 rounded-lg border ${o}`,children:[e.jsx("div",{className:"text-xs font-medium text-gray-600 uppercase tracking-wide",children:r}),e.jsx("div",{className:`text-2xl font-bold ${l} mt-1`,children:i}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:t})]})};function S({analysis:r}){var x;const[i,t]=n.useState(null),[s,o]=n.useState(!1);n.useEffect(()=>{(async()=>{var h;if((h=r.player)!=null&&h.id)try{o(!0);const c=await j.get(`/advanced/players/${r.player.id}/nextgen`,{params:{season:2024}});t(c.data.data)}catch(c){console.error("Failed to fetch advanced stats:",c)}finally{o(!1)}})()},[(x=r.player)==null?void 0:x.id]);const l=d=>{switch(d){case"START":return"bg-green-600 hover:bg-green-700";case"CONSIDER":return"bg-yellow-600 hover:bg-yellow-700";case"BENCH":return"bg-red-600 hover:bg-red-700";default:return"bg-gray-600 hover:bg-gray-700"}},v=d=>d.startsWith("A")?"text-green-600 dark:text-green-400":d.startsWith("B")?"text-blue-600 dark:text-blue-400":d.startsWith("C")?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400",p=d=>d>=70?"text-green-600 dark:text-green-400":d>=50?"text-blue-600 dark:text-blue-400":d>=30?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400";return e.jsxs("div",{className:"space-y-4",children:[e.jsxs(m,{children:[e.jsx(g,{children:e.jsxs(u,{className:"flex justify-between items-center",children:[e.jsx("span",{children:r.player.name}),e.jsx(b,{className:l(r.recommendation.status),children:r.recommendation.status})]})}),e.jsxs(_,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Matchup Score"}),e.jsxs("p",{className:`text-3xl font-bold ${p(r.matchup_score)}`,children:[r.matchup_score,"/100"]}),e.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:e.jsx("div",{className:"bg-primary h-2 rounded-full transition-all",style:{width:`${r.matchup_score}%`}})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Weather Impact"}),e.jsxs("p",{className:`text-3xl font-bold ${p(r.weather_impact)}`,children:[r.weather_impact,"/100"]}),e.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:e.jsx("div",{className:"bg-primary h-2 rounded-full transition-all",style:{width:`${r.weather_impact}%`}})})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"AI Grade"}),e.jsxs("div",{className:"flex items-baseline gap-4",children:[e.jsx("p",{className:`text-5xl font-bold ${v(r.ai_grade.grade)}`,children:r.ai_grade.grade}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-2xl font-semibold",children:[r.ai_grade.predicted_points," pts"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Projected fantasy points"})]})]}),e.jsx("div",{className:"mt-2",children:e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Confidence: "}),e.jsxs("span",{className:"font-semibold",children:[r.ai_grade.confidence,"%"]})]})})]}),r.recommendation.reason&&e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Analysis"}),e.jsx("p",{className:"text-sm",children:r.recommendation.reason})]}),r.weather_data&&e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Weather Conditions"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-sm",children:[r.weather_data.temperature&&e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Temp"}),e.jsxs("p",{className:"font-semibold",children:[r.weather_data.temperature,"Â°F"]})]}),r.weather_data.wind_speed&&e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Wind"}),e.jsxs("p",{className:"font-semibold",children:[r.weather_data.wind_speed," mph"]})]}),r.weather_data.conditions&&e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Conditions"}),e.jsx("p",{className:"font-semibold",children:r.weather_data.conditions})]})]})]})]})]}),e.jsx(f,{stats:i,loading:s})]})}export{S as PlayerAnalysis};
