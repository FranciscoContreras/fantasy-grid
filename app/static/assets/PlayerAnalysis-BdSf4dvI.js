import{j as e}from"./ui-vendor-DMJGUSRC.js";import{C as m,a as v,b,c as y,d as j}from"./index-DfSbbCOK.js";import{r as n}from"./react-vendor-nf7bT_Uh.js";const u=({stats:r,loading:d})=>{if(d)return e.jsxs("div",{className:"p-6 bg-white rounded-lg shadow",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Advanced Stats"}),e.jsxs("div",{className:"animate-pulse space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3"})]})]});if(!r)return e.jsxs("div",{className:"p-6 bg-white rounded-lg shadow",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Advanced Stats"}),e.jsx("p",{className:"text-gray-500",children:"No advanced stats available"})]});const{position:s}=r;return e.jsxs("div",{className:"p-6 bg-white rounded-lg shadow space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Advanced Stats (Next Gen Stats)"}),e.jsxs("span",{className:"text-sm text-gray-500",children:[r.season," ",r.week?`Week ${r.week}`:"Season"]})]}),s==="QB"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.cpoe!==void 0&&e.jsx(a,{label:"CPOE",value:`${r.cpoe>0?"+":""}${r.cpoe.toFixed(1)}%`,description:"Completion % Over Expected",highlight:r.cpoe>3?"positive":r.cpoe<-3?"negative":void 0}),r.epa_per_play!==void 0&&e.jsx(a,{label:"EPA/Play",value:r.epa_per_play.toFixed(2),description:"Expected Points Added per Play",highlight:r.epa_per_play>.2?"positive":r.epa_per_play<-.1?"negative":void 0}),r.time_to_throw!==void 0&&e.jsx(a,{label:"Time to Throw",value:`${r.time_to_throw.toFixed(1)}s`,description:"Average time from snap to release",highlight:r.time_to_throw<2.3?"positive":void 0}),r.avg_air_yards!==void 0&&e.jsx(a,{label:"Avg Air Yards",value:r.avg_air_yards.toFixed(1),description:"Average depth of target"})]}),r.success_rate!==void 0&&e.jsx("div",{className:"pt-4 border-t",children:e.jsx(a,{label:"Success Rate",value:`${r.success_rate.toFixed(1)}%`,description:"% of plays with positive EPA",highlight:r.success_rate>50?"positive":void 0})})]}),(s==="WR"||s==="TE")&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.avg_separation!==void 0&&e.jsx(a,{label:"Avg Separation",value:`${r.avg_separation.toFixed(1)} yd`,description:"Average yards from nearest defender",highlight:r.avg_separation>3.5?"positive":r.avg_separation<2?"negative":void 0}),r.avg_yac!==void 0&&e.jsx(a,{label:"Avg YAC",value:`${r.avg_yac.toFixed(1)} yd`,description:"Yards After Catch per reception",highlight:r.avg_yac>6?"positive":void 0}),r.target_share!==void 0&&e.jsx(a,{label:"Target Share",value:`${r.target_share.toFixed(1)}%`,description:"% of team's targets",highlight:r.target_share>25?"positive":r.target_share<12?"negative":void 0}),r.wopr!==void 0&&e.jsx(a,{label:"WOPR",value:r.wopr.toFixed(2),description:"Weighted Opportunity Rating",highlight:r.wopr>.7?"positive":void 0})]}),r.snap_share!==void 0&&e.jsx("div",{className:"pt-4 border-t",children:e.jsx(a,{label:"Snap Share",value:`${r.snap_share.toFixed(1)}%`,description:"% of offensive snaps played",highlight:r.snap_share>80?"positive":r.snap_share<50?"negative":void 0})})]}),s==="RB"&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.rush_yards_over_expected_per_att!==void 0&&e.jsx(a,{label:"Yards Over Expected",value:`${r.rush_yards_over_expected_per_att>0?"+":""}${r.rush_yards_over_expected_per_att.toFixed(1)} yd`,description:"Per carry vs expected",highlight:r.rush_yards_over_expected_per_att>.5?"positive":r.rush_yards_over_expected_per_att<-.3?"negative":void 0}),r.success_rate!==void 0&&e.jsx(a,{label:"Success Rate",value:`${r.success_rate.toFixed(1)}%`,description:"% of carries with positive EPA",highlight:r.success_rate>50?"positive":void 0}),r.snap_share!==void 0&&e.jsx(a,{label:"Snap Share",value:`${r.snap_share.toFixed(1)}%`,description:"% of offensive snaps",highlight:r.snap_share>70?"positive":r.snap_share<40?"negative":void 0}),r.epa_per_play!==void 0&&e.jsx(a,{label:"EPA/Play",value:r.epa_per_play.toFixed(2),description:"Expected Points Added per play",highlight:r.epa_per_play>.15?"positive":void 0})]})}),r.epa_total!==void 0&&e.jsxs("div",{className:"pt-4 border-t",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"Total EPA This Season"}),e.jsxs("div",{className:"text-2xl font-bold",children:[r.epa_total>0?"+":"",r.epa_total.toFixed(1)]})]}),e.jsx("div",{className:"pt-4 border-t text-xs text-gray-500",children:e.jsx("p",{children:"Data provided by Next Gen Stats via Grid Iron Mind API v2"})})]})},a=({label:r,value:d,description:s,highlight:i})=>{const c=i==="positive"?"bg-green-50 border-green-200":i==="negative"?"bg-red-50 border-red-200":"bg-gray-50 border-gray-200",l=i==="positive"?"text-green-700":i==="negative"?"text-red-700":"text-gray-900";return e.jsxs("div",{className:`p-4 rounded-lg border ${c}`,children:[e.jsx("div",{className:"text-xs font-medium text-gray-600 uppercase tracking-wide",children:r}),e.jsx("div",{className:`text-2xl font-bold ${l} mt-1`,children:d}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:s})]})};function w({analysis:r}){var x;const[d,s]=n.useState(null),[i,c]=n.useState(!1);n.useEffect(()=>{(async()=>{var g;if((g=r.player)!=null&&g.id)try{c(!0);const o=await j.get(`/advanced/players/${r.player.id}/nextgen`,{params:{season:2024}});s(o.data.data)}catch(o){console.error("Failed to fetch advanced stats:",o)}finally{c(!1)}})()},[(x=r.player)==null?void 0:x.id]);const l=t=>{switch(t){case"START":return"bg-white text-black border-2 border-white font-display uppercase tracking-[0.2em] text-sm font-bold";case"CONSIDER":return"bg-gray-600 text-white border-2 border-gray-600 font-display uppercase tracking-[0.2em] text-sm font-bold";case"BENCH":return"bg-gray-800 text-gray-300 border-2 border-gray-600 font-display uppercase tracking-[0.2em] text-sm font-bold";default:return"bg-gray-700 text-white border-2 border-gray-600 font-display uppercase tracking-[0.2em] text-sm font-bold"}},h=t=>t.startsWith("A")?"text-white":t.startsWith("B")?"text-gray-300":t.startsWith("C")?"text-gray-400":"text-gray-500",p=t=>t>=70?"text-white":t>=50?"text-gray-300":t>=30?"text-gray-400":"text-gray-500";return e.jsxs("div",{className:"space-y-8",children:[e.jsxs(m,{className:"bg-gray-900 text-white border-4 border-gray-700",children:[e.jsx(v,{className:"border-b-2 border-gray-600 pb-6",children:e.jsxs(b,{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-display text-2xl uppercase tracking-[0.1em] text-white",children:r.player.name}),e.jsxs("p",{className:"text-sm text-gray-400 uppercase tracking-[0.3em] mt-1 font-display",children:[r.player.position," Â· ",r.player.team]})]}),e.jsx("div",{className:`inline-flex items-center gap-2 px-6 py-3 ${l(r.recommendation.status)}`,children:r.recommendation.status})]})}),e.jsxs(y,{className:"space-y-8 pt-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4 p-6 bg-black border-2 border-gray-600",children:[e.jsx("p",{className:"text-sm text-gray-400 font-display uppercase tracking-[0.2em]",children:"Matchup Score"}),e.jsxs("p",{className:`text-4xl font-display ${p(r.matchup_score)}`,children:[r.matchup_score,"/100"]}),e.jsx("div",{className:"w-full bg-gray-700 h-3 border border-gray-600",children:e.jsx("div",{className:"bg-white h-full transition-all",style:{width:`${r.matchup_score}%`}})})]}),e.jsxs("div",{className:"space-y-4 p-6 bg-black border-2 border-gray-600",children:[e.jsx("p",{className:"text-sm text-gray-400 font-display uppercase tracking-[0.2em]",children:"Weather Impact"}),e.jsxs("p",{className:`text-4xl font-display ${p(r.weather_impact)}`,children:[r.weather_impact,"/100"]}),e.jsx("div",{className:"w-full bg-gray-700 h-3 border border-gray-600",children:e.jsx("div",{className:"bg-white h-full transition-all",style:{width:`${r.weather_impact}%`}})})]})]}),e.jsxs("div",{className:"border-t-2 border-gray-600 pt-6",children:[e.jsx("p",{className:"text-sm text-gray-400 font-display uppercase tracking-[0.2em] mb-4",children:"AI Championship Grade"}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-6 p-6 bg-black border-2 border-gray-600",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:`text-6xl font-script ${h(r.ai_grade.grade)}`,children:r.ai_grade.grade}),e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-[0.3em] font-display mt-2",children:"Grade"})]}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("p",{className:"text-3xl font-display text-white",children:[r.ai_grade.predicted_points," ",e.jsx("span",{className:"text-lg text-gray-400",children:"PTS"})]}),e.jsx("p",{className:"text-sm text-gray-400 uppercase tracking-[0.2em] font-display",children:"Projected Fantasy Points"}),e.jsx("div",{className:"mt-3",children:e.jsxs("p",{className:"text-sm font-body",children:[e.jsx("span",{className:"text-gray-400 uppercase tracking-wider",children:"Confidence: "}),e.jsxs("span",{className:"font-display text-white uppercase tracking-wider",children:[r.ai_grade.confidence,"%"]})]})})]})]})]}),r.recommendation.reason&&e.jsxs("div",{className:"border-t-2 border-gray-600 pt-6",children:[e.jsx("p",{className:"text-sm text-gray-400 font-display uppercase tracking-[0.2em] mb-4",children:"Championship Analysis"}),e.jsx("div",{className:"p-6 bg-gray-800 border-2 border-gray-600",children:e.jsx("p",{className:"text-sm font-body leading-relaxed text-gray-100",children:r.recommendation.reason})})]}),r.weather_data&&e.jsxs("div",{className:"border-t-2 border-gray-600 pt-6",children:[e.jsx("p",{className:"text-sm text-gray-400 font-display uppercase tracking-[0.2em] mb-4",children:"Field Conditions"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[r.weather_data.temperature&&e.jsxs("div",{className:"p-4 bg-black border-2 border-gray-600 text-center",children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-[0.3em] font-display",children:"Temperature"}),e.jsxs("p",{className:"text-2xl font-display text-white mt-2",children:[r.weather_data.temperature,"Â°F"]})]}),r.weather_data.wind_speed&&e.jsxs("div",{className:"p-4 bg-black border-2 border-gray-600 text-center",children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-[0.3em] font-display",children:"Wind Speed"}),e.jsxs("p",{className:"text-2xl font-display text-white mt-2",children:[r.weather_data.wind_speed," MPH"]})]}),r.weather_data.conditions&&e.jsxs("div",{className:"p-4 bg-black border-2 border-gray-600 text-center",children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-[0.3em] font-display",children:"Conditions"}),e.jsx("p",{className:"text-lg font-display text-white mt-2 uppercase tracking-wider",children:r.weather_data.conditions})]})]})]})]})]}),e.jsx(u,{stats:d,loading:i})]})}export{w as PlayerAnalysis};
