import{j as e}from"./ui-vendor-DMJGUSRC.js";import{r as n}from"./react-vendor-nf7bT_Uh.js";import{t as l,u as w,v as S,I as R}from"./index-Du_2ZAjR.js";import{g as T,a as E}from"./images-B9PVXi8e.js";const v=n.forwardRef(({className:a,...t},r)=>e.jsx("div",{ref:r,className:l("rounded-lg border bg-card text-card-foreground shadow-sm",a),...t}));v.displayName="Card";const P=n.forwardRef(({className:a,...t},r)=>e.jsx("div",{ref:r,className:l("flex flex-col space-y-1.5 p-6",a),...t}));P.displayName="CardHeader";const k=n.forwardRef(({className:a,...t},r)=>e.jsx("h3",{ref:r,className:l("text-2xl font-semibold leading-none tracking-tight",a),...t}));k.displayName="CardTitle";const _=n.forwardRef(({className:a,...t},r)=>e.jsx("p",{ref:r,className:l("text-sm text-muted-foreground",a),...t}));_.displayName="CardDescription";const B=n.forwardRef(({className:a,...t},r)=>e.jsx("div",{ref:r,className:l("p-6 pt-0",a),...t}));B.displayName="CardContent";const F=n.forwardRef(({className:a,...t},r)=>e.jsx("div",{ref:r,className:l("flex items-center p-6 pt-0",a),...t}));F.displayName="CardFooter";const D=w("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function h({className:a,variant:t,...r}){return e.jsx("div",{className:l(D({variant:t}),a),...r})}function I({onSelectPlayer:a}){const[t,r]=n.useState(""),[c,b]=n.useState(""),[d,m]=n.useState([]),[x,f]=n.useState(!1),[p,j]=n.useState(""),u=n.useCallback(async(s,i)=>{if(!s||s.length<2){m([]);return}f(!0),j("");try{const o=await S(s,i);m(o.data||[])}catch(o){j("Failed to search players. Please try again."),console.error("Search failed:",o)}finally{f(!1)}},[]);n.useEffect(()=>{const s=setTimeout(()=>{t.length>=2?u(t,c):m([])},150);return()=>clearTimeout(s)},[t,c,u]);const N=s=>{s.key==="Enter"&&t.length>=2&&u(t,c)},y=(s,i)=>{if(!i)return s;const o=s.split(new RegExp(`(${i})`,"gi"));return e.jsx(e.Fragment,{children:o.map((g,C)=>g.toLowerCase()===i.toLowerCase()?e.jsx("span",{className:"bg-yellow-200 dark:bg-yellow-800 font-semibold",children:g},C):g)})};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm text-muted-foreground mb-2",children:"💡 Tip: Select a position first for faster, more accurate results"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:c,onChange:s=>b(s.target.value),className:"px-3 py-2 border rounded-md bg-background min-w-[120px]",disabled:x,children:[e.jsx("option",{value:"",children:"All Positions"}),e.jsx("option",{value:"QB",children:"QB"}),e.jsx("option",{value:"RB",children:"RB"}),e.jsx("option",{value:"WR",children:"WR"}),e.jsx("option",{value:"TE",children:"TE"}),e.jsx("option",{value:"K",children:"K"}),e.jsx("option",{value:"DEF",children:"DEF"})]}),e.jsx(R,{placeholder:"Search players by name (min 2 characters)...",value:t,onChange:s=>r(s.target.value),onKeyPress:N,disabled:x,className:"flex-1"})]}),t.length>0&&t.length<2&&e.jsx("p",{className:"text-xs text-muted-foreground",children:"Type at least 2 characters to search"}),x&&e.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-2",children:[e.jsx("span",{className:"animate-spin",children:"⏳"})," Searching..."]})]}),p&&e.jsx("div",{className:"text-sm text-red-600 dark:text-red-400 p-3 bg-red-50 dark:bg-red-950 rounded-md",children:p}),d.length>0&&e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"text-xs text-muted-foreground",children:[d.length," player",d.length!==1?"s":""," found"]}),e.jsx("div",{className:"grid gap-2 max-h-96 overflow-y-auto",children:d.map((s,i)=>e.jsx(v,{className:"p-3 cursor-pointer hover:bg-accent transition-colors hover:shadow-md",onClick:()=>{a(s),r(""),m([])},children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("img",{src:T(s.player_id||s.nfl_id),alt:s.name,className:"w-12 h-12 rounded-full object-cover border-2 border-gray-200 dark:border-gray-700",onError:o=>{o.currentTarget.src="https://a.espncdn.com/combiner/i?img=/i/headshots/nophoto.png&w=200&h=146"}}),s.team&&e.jsx("img",{src:E(s.team),alt:s.team,className:"w-7 h-7 object-contain",onError:o=>o.currentTarget.style.display="none"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold",children:y(s.name,t)}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(h,{variant:"outline",className:"text-xs",children:s.position}),e.jsx(h,{variant:"outline",className:"text-xs",children:s.team}),s.status&&s.status.toUpperCase()==="ACTIVE"&&e.jsx(h,{className:"text-xs bg-green-600 text-white",children:"Active"})]})]})]}),s.jersey_number&&e.jsxs("div",{className:"text-xl font-bold text-muted-foreground ml-4",children:["#",s.jersey_number]})]})},s.id||i))})]}),!x&&d.length===0&&t.length>=2&&e.jsxs("div",{className:"text-center py-8",children:[e.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:['No players found for "',t,'"']}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Try:"}),e.jsxs("ul",{className:"text-xs text-muted-foreground mt-1",children:[e.jsx("li",{children:"• Checking your spelling"}),e.jsx("li",{children:"• Using a different name variation"}),e.jsx("li",{children:"• Searching by first or last name only"}),e.jsx("li",{children:"• Removing the position filter"})]})]})]})}const V=Object.freeze(Object.defineProperty({__proto__:null,PlayerSearch:I},Symbol.toStringTag,{value:"Module"}));export{h as B,v as C,I as P,B as a,P as b,k as c,V as d};
