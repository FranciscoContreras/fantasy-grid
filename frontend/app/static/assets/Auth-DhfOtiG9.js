import{j as e}from"./ui-vendor-DMJGUSRC.js";import{r as m}from"./react-vendor-nf7bT_Uh.js";import{C as j,I as n,B as f,r as v,s as y}from"./index-B_-y-RZq.js";function S({onAuthSuccess:d}){const[s,h]=m.useState(!0),[c,x]=m.useState(!1),[u,o]=m.useState(""),[a,g]=m.useState({email:"",username:"",password:"",first_name:"",last_name:""}),p=async t=>{var l,i;t.preventDefault(),x(!0),o("");try{s?(await v(a.email||a.username,a.password),d(!1)):(await y({email:a.email,username:a.username,password:a.password,first_name:a.first_name,last_name:a.last_name}),d(!0))}catch(b){o(((i=(l=b.response)==null?void 0:l.data)==null?void 0:i.error)||"Authentication failed")}finally{x(!1)}},r=(t,l)=>{g(i=>({...i,[t]:l}))};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:e.jsxs(j,{className:"w-full max-w-md p-8",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Fantasy Grid"}),e.jsx("p",{className:"text-gray-600",children:s?"Sign in to your account":"Create a new account"})]}),e.jsxs("form",{onSubmit:p,className:"space-y-4",children:[!s&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),e.jsx(n,{type:"text",value:a.first_name,onChange:t=>r("first_name",t.target.value),placeholder:"John"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),e.jsx(n,{type:"text",value:a.last_name,onChange:t=>r("last_name",t.target.value),placeholder:"Doe"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:s?"Email or Username":"Email"}),e.jsx(n,{type:s?"text":"email",required:!0,value:a.email,onChange:t=>r("email",t.target.value),placeholder:s?"email@example.com or username":"email@example.com"})]}),!s&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),e.jsx(n,{type:"text",required:!0,value:a.username,onChange:t=>r("username",t.target.value),placeholder:"username",minLength:3})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),e.jsx(n,{type:"password",required:!0,value:a.password,onChange:t=>r("password",t.target.value),placeholder:"••••••••",minLength:8})]}),u&&e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md",children:e.jsx("p",{className:"text-sm text-red-800",children:u})}),e.jsx(f,{type:"submit",className:"w-full",disabled:c,children:c?"Loading...":s?"Sign In":"Sign Up"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("button",{type:"button",onClick:()=>{h(!s),o("")},className:"text-sm text-indigo-600 hover:text-indigo-500",children:s?"Don't have an account? Sign up":"Already have an account? Sign in"})})]})})}export{S as Auth};
